(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{"0ae1":function(t,e,n){},"305d":function(t,e,n){"use strict";var a=n("0ae1"),r=n.n(a);r.a},"3e5f":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("h4",[t._v("Game Manager")]),n("q-card",{staticClass:"my-card"},[n("q-img",{attrs:{src:"https://cdn.quasar.dev/img/parallax2.jpg"}},[n("div",{staticClass:"absolute-bottom"},[n("div",{staticClass:"text-h6"},[t._v(t._s(t.company_name))]),n("div",{staticClass:"text-subtitle2"},[t._v("Current Round ："+t._s(t.round))])])]),n("q-card-actions")],1),n("q-table",{attrs:{title:"Works List",data:t.data,columns:t.columns,"row-key":"id",pagination:t.pagination,loading:t.loading,filter:t.filter,"binary-state-sort":""},on:{"update:pagination":function(e){t.pagination=e},request:t.onRequest},scopedSlots:t._u([{key:"top-right",fn:function(){return[n("q-btn",{staticClass:"btn-add",attrs:{color:"primary",rounded:"",icon:"skip_next",label:"Next Round"},on:{click:function(e){t.is_submit_show=!0}}})]},proxy:!0},{key:"body",fn:function(e){return[n("q-tr",{attrs:{props:e}},[n("q-td",{key:"name",attrs:{props:e}},[t._v(t._s(e.row.name))]),n("q-td",{key:"operation_count",attrs:{props:e}},[t._v(t._s(e.row.operation_count))]),n("q-td",{key:"hc",attrs:{props:e}},[t._v(t._s(e.row.hc))]),n("q-td",{key:"advertising",attrs:{props:e}},[t._v(t._s(e.row.advertising))]),n("q-td",{key:"a_price",attrs:{props:e}},[t._v(t._s(e.row.a_price))]),n("q-td",{key:"a_share",attrs:{props:e}},[t._v(t._s(e.row.a_share))]),n("q-td",{key:"b_price",attrs:{props:e}},[t._v(t._s(e.row.b_price))]),n("q-td",{key:"b_share",attrs:{props:e}},[t._v(t._s(e.row.b_share))]),n("q-td",{key:"c_price",attrs:{props:e}},[t._v(t._s(e.row.c_price))]),n("q-td",{key:"c_share",attrs:{props:e}},[t._v(t._s(e.row.c_share))]),n("q-td",{key:"hc_strategy",attrs:{props:e}},[t._v("\n          "+t._s(e.row.hc_strategy)+"\n          "),n("q-popup-edit",{attrs:{title:"Update HC",buttons:"",persistent:""},model:{value:e.row.info,callback:function(n){t.$set(e.row,"info",n)},expression:"props.row.info"}},[n("q-input",{attrs:{type:"number",dense:"",autofocus:"",hint:"Use buttons to close"},model:{value:e.row.hc_strategy,callback:function(n){t.$set(e.row,"hc_strategy",n)},expression:"props.row.hc_strategy"}})],1)],1),n("q-td",{key:"advertising_strategy",attrs:{props:e}},[t._v("\n          "+t._s(e.row.advertising_strategy)+"\n          "),n("q-popup-edit",{attrs:{title:"Update Advertising",buttons:"",persistent:""},model:{value:e.row.advertising_strategy,callback:function(n){t.$set(e.row,"advertising_strategy",n)},expression:"props.row.advertising_strategy"}},[n("q-input",{attrs:{type:"number",dense:"",autofocus:"",hint:"Use buttons to close"},model:{value:e.row.advertising_strategy,callback:function(n){t.$set(e.row,"advertising_strategy",n)},expression:"props.row.advertising_strategy"}})],1)],1),n("q-td",{key:"a_strategy",attrs:{props:e}},[t._v("\n          "+t._s(e.row.a_strategy)+"\n          "),n("q-popup-edit",{attrs:{title:"Update A Price",buttons:"",persistent:""},model:{value:e.row.a_strategy,callback:function(n){t.$set(e.row,"a_strategy",n)},expression:"props.row.a_strategy"}},[n("q-input",{attrs:{type:"number",dense:"",autofocus:"",hint:"Use buttons to close"},model:{value:e.row.a_strategy,callback:function(n){t.$set(e.row,"a_strategy",n)},expression:"props.row.a_strategy"}})],1)],1),n("q-td",{key:"b_strategy",attrs:{props:e}},[t._v("\n          "+t._s(e.row.a_strategy)+"\n          "),n("q-popup-edit",{attrs:{title:"Update B Price",buttons:"",persistent:""},model:{value:e.row.b_strategy,callback:function(n){t.$set(e.row,"b_strategy",n)},expression:"props.row.b_strategy"}},[n("q-input",{attrs:{type:"number",dense:"",autofocus:"",hint:"Use buttons to close"},model:{value:e.row.b_strategy,callback:function(n){t.$set(e.row,"b_strategy",n)},expression:"props.row.b_strategy"}})],1)],1),n("q-td",{key:"c_strategy",attrs:{props:e}},[t._v("\n          "+t._s(e.row.a_strategy)+"\n          "),n("q-popup-edit",{attrs:{title:"Update C Price",buttons:"",persistent:""},model:{value:e.row.c_strategy,callback:function(n){t.$set(e.row,"c_strategy",n)},expression:"props.row.c_strategy"}},[n("q-input",{attrs:{type:"number",dense:"",autofocus:"",hint:"Use buttons to close"},model:{value:e.row.c_strategy,callback:function(n){t.$set(e.row,"c_strategy",n)},expression:"props.row.c_strategy"}})],1)],1),n("q-td",{key:"channel",attrs:{props:e}},[t._v("\n          "+t._s(e.row.channel)+"\n          "),n("q-popup-edit",{attrs:{title:"Update Channel",buttons:"",persistent:""},model:{value:e.row.channel,callback:function(n){t.$set(e.row,"channel",n)},expression:"props.row.channel"}},[n("q-input",{attrs:{type:"number",dense:"",autofocus:"",hint:"Use buttons to close"},model:{value:e.row.channel,callback:function(n){t.$set(e.row,"channel",n)},expression:"props.row.channel"}})],1)],1),n("q-td",{key:"permission",attrs:{props:e}},[t._v("\n          "+t._s(e.row.permission)+"\n          "),n("q-popup-edit",{attrs:{title:"Update Permission",buttons:"",persistent:""},model:{value:e.row.permission,callback:function(n){t.$set(e.row,"permission",n)},expression:"props.row.permission"}},[n("q-input",{attrs:{type:"number",dense:"",autofocus:"",hint:"Use buttons to close"},model:{value:e.row.permission,callback:function(n){t.$set(e.row,"permission",n)},expression:"props.row.permission"}})],1)],1),n("q-td",{key:"info",attrs:{props:e}},[t._v("\n          "+t._s(e.row.info)+"\n          "),n("q-popup-edit",{attrs:{title:"Update Info",buttons:"",persistent:""},model:{value:e.row.info,callback:function(n){t.$set(e.row,"info",n)},expression:"props.row.info"}},[n("q-input",{attrs:{type:"number",dense:"",autofocus:"",hint:"Use buttons to close"},model:{value:e.row.info,callback:function(n){t.$set(e.row,"info",n)},expression:"props.row.info"}})],1)],1)],1)]}}])}),n("q-dialog",{attrs:{persistent:""},model:{value:t.is_submit_show,callback:function(e){t.is_submit_show=e},expression:"is_submit_show"}},[n("q-card",{staticStyle:{"min-width":"350px"}},[n("q-card-section",[n("div",{staticClass:"text-h6"},[t._v("结束回合")])]),n("q-card-section",{staticClass:"q-pt-none del-dialog"},[n("p",{staticClass:"msg"},[t._v("你确定提交第"+t._s(t.rounds)+"回合策略么？")])]),n("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel"}}),n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",color:"green",label:"Submit"},on:{click:function(e){return t.submit()}}})],1)],1)],1)],1)},r=[],o=(n("a4d3"),n("e01a"),n("99af"),n("4de4"),n("4160"),n("caad"),n("fb6a"),n("4e82"),n("a434"),n("b0c0"),n("2532"),n("159b"),n("448a")),i=n.n(o),s=n("89cb"),c={name:"Game_player",data:function(){return{uuid:"",game_id:7,rounds:2,company_id:"a",capital:0,man:0,man_cost:1e3,channel_count:10,channel_price:1100,permission_count:11,permission_price:1010,info_count:12,info_price:1001,is_submit_show:!1,ready_to_submit:{id:0,name:"god"},company_name:"公司1",filter:"",loading:!1,pagination:{sortBy:"id",descending:!1,page:1,rowsPerPage:0,rowsNumber:10},columns:[{name:"name",required:!0,label:"医院名称",align:"left",field:function(t){return t.name},style:"width: 10px",headerStyle:"width: 10px",format:function(t){return"".concat(t)},sortable:!0},{name:"operation_count",required:!0,label:"年手术台数",align:"left",field:function(t){return t.operation_count},style:"width:200px",format:function(t){return"".concat(t)},sortable:!1},{name:"hc",required:!0,label:"当前HC",align:"left",field:function(t){return t.hc},style:"width:200px",format:function(t){return"".concat(t)},sortable:!1},{name:"advertising",required:!0,label:"推广费用",align:"left",field:function(t){return t.advertising},style:"width:200px",format:function(t){return"".concat(t)},sortable:!1},{name:"a_price",required:!0,label:"产品A价格",align:"left",field:function(t){return t.a_price},style:"width:200px",format:function(t){return"".concat(t)},sortable:!1},{name:"a_share",required:!1,label:"产品A份额",align:"left",field:function(t){return t.a_share},style:"width:200px",format:function(t){return"".concat(t)},sortable:!1},{name:"b_price",required:!1,label:"产品B价格",align:"left",field:function(t){return t.b_price},style:"width:200px",format:function(t){return"".concat(t)},sortable:!1},{name:"b_share",required:!0,label:"ProductA Price",align:"产品B份额",field:function(t){return t.b_share},style:"width:200px",format:function(t){return"".concat(t)},sortable:!0},{name:"c_price",required:!0,label:"产品C价格",align:"left",field:function(t){return t.c_price},style:"width:200px",format:function(t){return"".concat(t)},sortable:!0},{name:"c_share",required:!0,label:"产品C份额",align:"left",field:function(t){return t.c_share},style:"width:200px",format:function(t){return"".concat(t)},sortable:!0},{name:"hc_strategy",required:!0,label:"HC决策",align:"left",field:function(t){return t.hc_strategy},style:"width:200px",format:function(t){return"".concat(t)},sortable:!0},{name:"advertising_strategy",required:!0,label:"推广决策",align:"left",field:function(t){return t.advertising_strategy},style:"width:200px",format:function(t){return"".concat(t)},sortable:!0},{name:"a_strategy",required:!0,label:"产品A价格决策",align:"left",field:function(t){return t.a_strategy},style:"width:200px",format:function(t){return"".concat(t)},sortable:!0},{name:"b_strategy",required:!0,label:"产品B价格决策",align:"left",field:function(t){return t.b_strategy},style:"width:200px",format:function(t){return"".concat(t)},sortable:!0},{name:"c_strategy",required:!0,label:"产品C价格决策",align:"left",field:function(t){return t.c_strategy},style:"width:200px",format:function(t){return"".concat(t)},sortable:!0},{name:"channel",required:!0,label:"渠道牌",align:"left",field:function(t){return t.channel},style:"width:200px",format:function(t){return"".concat(t)},sortable:!0},{name:"permission",required:!0,label:"准入牌",align:"left",field:function(t){return t.permission},style:"width:200px",format:function(t){return"".concat(t)},sortable:!0},{name:"info",required:!0,label:"信息牌",align:"left",field:function(t){return t.info},style:"width:200px",format:function(t){return"".concat(t)},sortable:!0}],data:[],original:[]}},mounted:function(){this.get_uuid(),this.onRequest({pagination:this.pagination,filter:this.filter})},methods:{onRequest:function(t){var e=this,n=t.pagination,a=n.page,r=n.rowsPerPage,o=n.sortBy,s=n.descending,c=t.filter;this.loading=!0,this.get_company_data(c,s),setTimeout((function(){var t;e.pagination.rowsNumber=e.getRowsNumberCount(c);var n=0===r?e.pagination.rowsNumber:r,u=(a-1)*r,l=e.fetchFromServer(u,n,c,o,s);(t=e.data).splice.apply(t,[0,e.data.length].concat(i()(l))),e.pagination.page=a,e.pagination.rowsPerPage=r,e.pagination.sortBy=o,e.pagination.descending=s,e.loading=!1}),1500)},fetchFromServer:function(t,e,n,a,r){var o=n?this.original.filter((function(t){return t.account.includes(n)})):this.original.slice();if(a){var i="id"===a?r?function(t,e){return t.name>e.name?-1:t.name<e.name?1:0}:function(t,e){return t.name>e.name?1:t.name<e.name?-1:0}:r?function(t,e){return parseFloat(e[a])-parseFloat(t[a])}:function(t,e){return parseFloat(t[a])-parseFloat(e[a])};o.sort(i)}return o.slice(t,t+e)},getRowsNumberCount:function(t){if(!t)return this.original.length;var e=0;return this.original.forEach((function(n){n.account.includes(t)&&++e})),e},get_company_data:function(t,e){this.original=[];var n=this;s["a"].GetCompanyData(this.game_id,this.company_id,this.rounds).then((function(t){var e=t.data;console.log(e);for(var a=0;a<e.length;a++)n.original.push({name:e[a].name,operation_count:e[a].operation_count,hc:e[a].hc,advertising:e[a].advertising,a_price:e[a].a_price,a_share:e[a].a_share,b_price:e[a].b_price,b_share:e[a].b_share,c_price:e[a].c_price,c_share:e[a].c_share,hc_strategy:e[a].hc_strategy,advertising_strategy:e[a].advertising_strategy,a_strategy:e[a].a_strategy,b_strategy:e[a].b_strategy,c_strategy:e[a].c_strategy,channel:e[a].channel,permission:e[a].permission,info:e[a].info})}))},clear_add_dialog:function(){this.account="",this.password=""},creat_game:function(){var t=this;s["a"].Create(this.name,this.description).then((function(e){switch(e.code){default:break;case 200:t.onRequest({pagination:t.pagination,filter:t.filter});break;case 600:break;case 601:break}})),this.clear_add_dialog()},show_delete_dialog:function(t,e){this.is_delete_show=!0,this.ready_to_delete.id=t,this.ready_to_delete.name=e},get_uuid:function(){var t=window.location.href;alert(t)},submit:function(){s["a"].Submit(this.game_id,this.company_id,this.rounds,this.data).then((function(t){switch(t.code){default:break;case 200:alert("提交成功");break}}))}}},u=c,l=(n("305d"),n("2877")),p=n("f09f"),d=n("068f"),f=n("4b7e"),_=n("9c40"),g=n("eaac"),m=n("27f9"),h=n("0016"),b=n("bd08"),y=n("db86"),w=n("42a1"),v=n("24e8"),q=n("a370"),k=n("7f67"),x=n("eebe"),C=n.n(x),U=Object(l["a"])(u,a,r,!1,null,"43e3f914",null);e["default"]=U.exports;C()(U,"components",{QCard:p["a"],QImg:d["a"],QCardActions:f["a"],QBtn:_["a"],QTable:g["a"],QInput:m["a"],QIcon:h["a"],QTr:b["a"],QTd:y["a"],QPopupEdit:w["a"],QDialog:v["a"],QCardSection:q["a"]}),C()(U,"directives",{ClosePopup:k["a"]})},"89cb":function(t,e,n){"use strict";var a=n("970b"),r=n.n(a),o=n("5bc3"),i=n.n(o),s=n("ed6d"),c=n.n(s),u=n("2d0d"),l=n.n(u),p=n("a417"),d="local_api/game",f=function(t){c()(n,t);var e=l()(n);function n(){return r()(this,n),e.call(this,d,3e3)}return i()(n,[{key:"Create",value:function(t,e){return this.post("/register",{name:t,description:e})}},{key:"Filter",value:function(t,e){return this.post("/filter",{start_row:0,count:2e3,account_filter:t,sort_by:"id",descending:e})}},{key:"Delete",value:function(t){return this.post("/delete",{uid:t})}},{key:"Submit",value:function(t,e,n,a){return this.post("/submit",{game_id:t,company_id:e,rounds:n,data:a})}},{key:"GetCompanyData",value:function(t,e,n){return this.post("/get_com_data",{game_id:t,company_id:e,rounds:n})}},{key:"GetCompanyInfo",value:function(t,e){return this.post("/get_com_info",{game_id:t,rounds:e})}},{key:"GetGameInfo",value:function(t){return this.post("/get_game_info",{game_id:t})}},{key:"Next",value:function(t,e){return this.post("/next",{game_id:t,data:e})}},{key:"Start",value:function(t){return this.post("/start",{game_id:t})}}]),n}(p["a"]);e["a"]=new f},a417:function(t,e,n){"use strict";n("d3b7"),n("e6cf");var a=n("970b"),r=n.n(a),o=n("5bc3"),i=n.n(o),s=n("bc3a"),c=n.n(s),u=n("a18c"),l=function(){function t(e,n){r()(this,t),this.url=e,this.timeout=n,this.instance=c.a.create({baseURL:this.url,timeout:this.timeout,headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:localStorage.getItem("Authorization")}}),this.instance.interceptors.request.use((function(t){return t.headers.Authorization=localStorage.getItem("Authorization"),t}),(function(t){return Promise.reject(t)})),this.instance.interceptors.response.use((function(t){switch(t.data.code){case 200:console.log("信息获取成功");break;case 403:console.log("权限不足,权限不足"),u["a"].push("/login");break;case 600:console.log("表单信息错误");break;case 601:console.log("用户名重复");break;case 602:console.log("登录失败");break}return t.data}),(function(t){return Promise.reject(t)}))}return i()(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.instance.get(t,e)}},{key:"post",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.instance.post(t,e,n)}},{key:"upload",value:function(t,e){return this.instance.post(t,e,{headers:{"Content-Type":"multipart/form-data"}})}},{key:"put",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.instance.put(t,e,n)}},{key:"delete",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.instance.delete(t,e)}}]),t}();e["a"]=l}}]);