(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"23e1":function(t,e,_){"use strict";var a=_("be37"),i=_.n(a);i.a},"3e5f":function(t,e,_){"use strict";_.r(e);var a=function(){var t=this,e=t.$createElement,_=t._self._c||e;return _("div",{staticClass:"container"},[_("h4",[t._v(t._s(t.game_name))]),_("q-card",{staticClass:"my-card"},[_("q-img",{attrs:{src:"https://cdn.quasar.dev/img/parallax2.jpg"}},[_("div",{staticClass:"absolute-bottom"},[_("div",{staticClass:"text-h6"},[t._v(t._s(t.company_name))]),_("div",{staticClass:"text-subtitle2"},[t._v("Current Round ："+t._s(t.rounds))])])]),_("div",{staticClass:"row"},[_("div",{staticClass:"col"},[t._v("总资金："+t._s(this.capital))]),_("div",{staticClass:"col",style:{color:t.capital_check?"#666":"#FF0000"}},[t._v("使用："+t._s(this.temp_capital))]),_("div",{staticClass:"col"},[t._v("人力成本:"+t._s(t.hc_price))]),_("div",{staticClass:"col"},[t._v("渠道牌价格："+t._s(t.channel_price))]),_("div",{staticClass:"col"},[t._v("准入牌价格："+t._s(t.permission_price))]),_("div",{staticClass:"col"},[t._v("信息牌价格："+t._s(t.info_price))]),_("div",{staticClass:"col"},[t._v("VBP价格："+t._s(t.vbp_price))]),_("div",{staticClass:"col"},[t._v("VBP份额："+t._s(t.vbp_share))]),_("div",{staticClass:"col",style:{color:t.a_check?"#666":"#FF0000"}},[t._v("A成本："+t._s(t.a_cost))]),_("div",{staticClass:"col",style:{color:t.b_check?"#666":"#FF0000"}},[t._v("B成本："+t._s(t.b_cost))]),_("div",{staticClass:"col",style:{color:t.c_check?"#666":"#FF0000"}},[t._v("C成本："+t._s(t.c_cost))])]),_("div",{staticClass:"row"},[_("div",{staticClass:"col"},[t._v("可分配人数："+t._s(t.hc_init))]),_("div",{staticClass:"col"},[t._v("已分配人数："+t._s(t.hc_assigned))]),_("div",{staticClass:"col",style:{color:t.hc_check?"#666":"#FF0000"}},[t._v("新分配人数："+t._s(t.total_hc))]),_("div",{staticClass:"col"},[t._v("可新增人数:"+t._s(t.hc_can_be_added))]),_("div",{staticClass:"col",style:{color:t.channel_check?"#666":"#FF0000"}},[t._v("渠道牌数量："+t._s(t.channel_count-t.total_channel))]),_("div",{staticClass:"col",style:{color:t.permission_check?"#666":"#FF0000"}},[t._v("准入牌数量："+t._s(t.permission_count-t.total_permission))]),_("div",{staticClass:"col",style:{color:t.info_check?"#666":"#FF0000"}},[t._v("信息牌数量："+t._s(t.info_count-t.total_info))]),_("div",{staticClass:"col"},[t._v("营收："+t._s(t.profit))]),_("div",{staticClass:"col"},[t._v("上轮营收："+t._s(t.last_profit))]),_("div",{staticClass:"col"},[t._v("总营收："+t._s(t.total_profit))]),_("div",{staticClass:"col"},[t._v("营收增长净值："+t._s(t.profit_change))]),_("div",{staticClass:"col"},[t._v("营收增长比例："+t._s(t.profit_change_ratio))])])],1),_("q-table",{staticClass:"my-sticky-virtscroll-table",attrs:{"virtual-scroll":"",pagination:t.pagination,"rows-per-page-options":[0],"virtual-scroll-sticky-size-start":48,"row-key":"id",title:"Strategy",data:t.data,columns:t.columns},on:{"update:pagination":function(e){t.pagination=e},request:t.onRequest},scopedSlots:t._u([{key:"top-right",fn:function(){return[_("q-btn",{staticClass:"btn-add",attrs:{color:"primary",rounded:"",icon:"skip_next",label:"Next Round",disabled:!t.is_able_to_submit},on:{click:function(e){t.is_submit_show=!0}}})]},proxy:!0},{key:"body",fn:function(e){return[_("q-tr",{attrs:{props:e}},[_("q-tooltip",{attrs:{anchor:"top left",self:"top middle",offset:[10,10]}},[_("strong",[t._v(t._s(e.row.name))]),_("br"),_("em",[t._v(t._s(1==e.row.share_visibility?e.row.operation_count:"暂不可见"))])]),_("q-td",{key:"name",attrs:{props:e}},[t._v(t._s(e.row.name))]),_("q-td",{key:"operation_count",attrs:{props:e}},[t._v(t._s(1==e.row.share_visibility?e.row.operation_count:"暂不可见"))]),_("q-td",{key:"hc",attrs:{props:e}},[t._v(t._s(e.row.hc))]),_("q-td",{key:"advertising",attrs:{props:e}},[t._v(t._s(e.row.advertising))]),_("q-td",{key:"a_price",attrs:{props:e}},[t._v(t._s(e.row.a_price))]),_("q-td",{key:"a_count",attrs:{props:e}},[t._v(t._s(e.row.a_count))]),_("q-td",{key:"b_price",attrs:{props:e}},[t._v(t._s(e.row.b_price))]),_("q-td",{key:"b_count",attrs:{props:e}},[t._v(t._s(e.row.b_count))]),_("q-td",{key:"c_price",attrs:{props:e}},[t._v(t._s(e.row.c_price))]),_("q-td",{key:"c_count",attrs:{props:e}},[t._v(t._s(e.row.c_count))]),_("q-td",{key:"last_operation_count",attrs:{props:e}},[t._v(t._s(e.row.last_operation_count))]),_("q-td",{key:"current_operation_count",attrs:{props:e}},[t._v(t._s(e.row.current_operation_count))]),_("q-td",{key:"operation_count_change",attrs:{props:e}},[t._v(t._s(e.row.operation_count_change))]),_("q-td",{key:"operation_count_change_ratio",attrs:{props:e}},[t._v(t._s(e.row.operation_count_change_ratio))]),_("q-td",{key:"hc_strategy",staticClass:"editable",attrs:{props:e}},[t._v("\n          "+t._s(e.row.hc_strategy)+"\n          "),_("q-popup-edit",{attrs:{title:"Update HC",buttons:"",persistent:""},model:{value:e.row.info,callback:function(_){t.$set(e.row,"info",_)},expression:"props.row.info"}},[_("q-input",{attrs:{type:"number",dense:"",autofocus:"",hint:"Use buttons to close"},model:{value:e.row.hc_strategy,callback:function(_){t.$set(e.row,"hc_strategy",_)},expression:"props.row.hc_strategy"}})],1)],1),_("q-td",{key:"advertising_strategy",staticClass:"editable",attrs:{props:e}},[t._v("\n          "+t._s(e.row.advertising_strategy)+"\n          "),_("q-popup-edit",{attrs:{title:"Update Advertising",buttons:"",persistent:""},model:{value:e.row.advertising_strategy,callback:function(_){t.$set(e.row,"advertising_strategy",_)},expression:"props.row.advertising_strategy"}},[_("q-input",{attrs:{type:"number",dense:"",autofocus:"",hint:"Use buttons to close"},model:{value:e.row.advertising_strategy,callback:function(_){t.$set(e.row,"advertising_strategy",_)},expression:"props.row.advertising_strategy"}})],1)],1),_("q-td",{key:"a_strategy",staticClass:"editable",attrs:{props:e}},[t._v("\n          "+t._s(e.row.a_strategy)+"\n          "),_("q-popup-edit",{attrs:{title:"Update A Price",buttons:"",persistent:""},model:{value:e.row.a_strategy,callback:function(_){t.$set(e.row,"a_strategy",_)},expression:"props.row.a_strategy"}},[_("q-input",{attrs:{type:"number",dense:"",autofocus:"",hint:"Use buttons to close"},model:{value:e.row.a_strategy,callback:function(_){t.$set(e.row,"a_strategy",_)},expression:"props.row.a_strategy"}})],1)],1),_("q-td",{key:"b_strategy",staticClass:"editable",attrs:{props:e}},[t._v("\n          "+t._s(e.row.b_strategy)+"\n          "),_("q-popup-edit",{attrs:{title:"Update B Price",buttons:"",persistent:""},model:{value:e.row.b_strategy,callback:function(_){t.$set(e.row,"b_strategy",_)},expression:"props.row.b_strategy"}},[_("q-input",{attrs:{type:"number",dense:"",autofocus:"",hint:"Use buttons to close"},model:{value:e.row.b_strategy,callback:function(_){t.$set(e.row,"b_strategy",_)},expression:"props.row.b_strategy"}})],1)],1),_("q-td",{key:"c_strategy",staticClass:"editable",attrs:{props:e}},[t._v("\n          "+t._s(e.row.c_strategy)+"\n          "),_("q-popup-edit",{attrs:{title:"Update C Price",buttons:"",persistent:""},model:{value:e.row.c_strategy,callback:function(_){t.$set(e.row,"c_strategy",_)},expression:"props.row.c_strategy"}},[_("q-input",{attrs:{type:"number",dense:"",autofocus:"",hint:"Use buttons to close"},model:{value:e.row.c_strategy,callback:function(_){t.$set(e.row,"c_strategy",_)},expression:"props.row.c_strategy"}})],1)],1),_("q-td",{key:"channel",staticClass:"editable",attrs:{props:e}},[t._v("\n          "+t._s(e.row.channel)+"\n          "),_("q-popup-edit",{attrs:{title:"Update Channel",buttons:"",persistent:""},model:{value:e.row.channel,callback:function(_){t.$set(e.row,"channel",_)},expression:"props.row.channel"}},[_("q-input",{attrs:{type:"number",dense:"",autofocus:"",hint:"Use buttons to close"},model:{value:e.row.channel,callback:function(_){t.$set(e.row,"channel",_)},expression:"props.row.channel"}})],1)],1),_("q-td",{key:"permission",staticClass:"editable",attrs:{props:e}},[t._v("\n          "+t._s(e.row.permission)+"\n          "),_("q-popup-edit",{attrs:{title:"Update Permission",buttons:"",persistent:""},model:{value:e.row.permission,callback:function(_){t.$set(e.row,"permission",_)},expression:"props.row.permission"}},[_("q-input",{attrs:{type:"number",dense:"",autofocus:"",hint:"Use buttons to close"},model:{value:e.row.permission,callback:function(_){t.$set(e.row,"permission",_)},expression:"props.row.permission"}})],1)],1),_("q-td",{key:"info",staticClass:"editable",attrs:{props:e}},[t._v("\n          "+t._s(e.row.info)+"\n          "),_("q-popup-edit",{attrs:{title:"Update Info",buttons:"",persistent:""},model:{value:e.row.info,callback:function(_){t.$set(e.row,"info",_)},expression:"props.row.info"}},[_("q-input",{attrs:{type:"number",dense:"",autofocus:"",hint:"Use buttons to close"},model:{value:e.row.info,callback:function(_){t.$set(e.row,"info",_)},expression:"props.row.info"}})],1)],1)],1)]}}])}),_("q-dialog",{attrs:{persistent:""},model:{value:t.is_submit_show,callback:function(e){t.is_submit_show=e},expression:"is_submit_show"}},[_("q-card",{staticStyle:{"min-width":"350px"}},[_("q-card-section",[_("div",{staticClass:"text-h6"},[t._v("结束回合")])]),_("q-card-section",{staticClass:"q-pt-none del-dialog"},[_("p",{staticClass:"msg"},[t._v("你确定提交第"+t._s(t.rounds)+"回合策略么？")])]),_("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[_("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel"}}),_("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",color:"green",label:"Submit"},on:{click:function(e){return t.submit()}}})],1)],1)],1)],1)},i=[],r=_("e7ae"),o=r["a"],s=(_("23e1"),_("a605"),_("2877")),n=_("f09f"),c=_("068f"),l=_("eaac"),u=_("27f9"),d=_("0016"),p=_("9c40"),h=_("bd08"),m=_("05c0"),f=_("db86"),b=_("42a1"),g=_("24e8"),y=_("a370"),v=_("4b7e"),w=_("7f67"),E=_("eebe"),k=_.n(E),M=Object(s["a"])(o,a,i,!1,null,"361ad1c6",null);e["default"]=M.exports;k()(M,"components",{QCard:n["a"],QImg:c["a"],QTable:l["a"],QInput:u["a"],QIcon:d["a"],QBtn:p["a"],QTr:h["a"],QTooltip:m["a"],QTd:f["a"],QPopupEdit:b["a"],QDialog:g["a"],QCardSection:y["a"],QCardActions:v["a"]}),k()(M,"directives",{ClosePopup:w["a"]})},"89cb":function(t,e,_){"use strict";var a=_("970b"),i=_.n(a),r=_("5bc3"),o=_.n(r),s=_("ed6d"),n=_.n(s),c=_("2d0d"),l=_.n(c),u=_("a417"),d="api/game",p=function(t){n()(_,t);var e=l()(_);function _(){return i()(this,_),e.call(this,d,3e3)}return o()(_,[{key:"Create",value:function(t,e){return this.post("/register",{name:t,description:e})}},{key:"Filter",value:function(t,e){return this.post("/filter",{start_row:0,count:2e3,account_filter:t,sort_by:"id",descending:e})}},{key:"Delete",value:function(t){return this.post("/delete",{uid:t})}},{key:"Submit",value:function(t,e,_,a){return this.post("/submit",{game_id:t,company_id:e,rounds:_,data:a})}},{key:"GetCompanyData",value:function(t,e,_){return this.post("/get_com_data",{game_id:t,company_id:e,rounds:_})}},{key:"GetCompanyInfo",value:function(t,e){return this.post("/get_com_info",{game_id:t,rounds:e})}},{key:"GetGameInfo",value:function(t){return this.post("/get_game_info",{game_id:t})}},{key:"Next",value:function(t,e){return this.post("/next",{game_id:t,data:e})}},{key:"Start",value:function(t,e){return this.post("/start",{game_id:t,data:e})}},{key:"QueryByUUID",value:function(t){return this.post("/query_by_uuid",{uuid:t})}}]),_}(u["a"]);e["a"]=new p},a417:function(t,e,_){"use strict";_("d3b7"),_("e6cf");var a=_("970b"),i=_.n(a),r=_("5bc3"),o=_.n(r),s=_("bc3a"),n=_.n(s),c=(_("a18c"),_("2a19")),l=function(){function t(e,_){i()(this,t),this.url=e,this.timeout=_,this.instance=n.a.create({baseURL:this.url,timeout:this.timeout,headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:localStorage.getItem("Authorization")}}),this.instance.interceptors.request.use((function(t){return t.headers.Authorization=localStorage.getItem("Authorization"),t}),(function(t){return Promise.reject(t)})),this.instance.interceptors.response.use((function(t){switch(t.data.code){case 200:console.log("尝试获取信息");break;case 403:console.log(t.data),window.router.push("/login"),c["a"].create({message:"权限不足，请登录后尝试",type:"negative",textColor:"white",position:"top"});break;case 600:c["a"].create({message:"表单信息错误",type:"negative",textColor:"white",position:"top"});break;case 601:c["a"].create({message:"用户名重复",type:"negative",textColor:"white",position:"top"});break;case 602:c["a"].create({message:"登录失败",type:"negative",textColor:"white",position:"top"});break}return t.data}),(function(t){return Promise.reject(t)}))}return o()(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.instance.get(t,e)}},{key:"post",value:function(t,e){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.instance.post(t,e,_)}},{key:"upload",value:function(t,e){return this.instance.post(t,e,{headers:{"Content-Type":"multipart/form-data"}})}},{key:"put",value:function(t,e){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.instance.put(t,e,_)}},{key:"delete",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.instance.delete(t,e)}}]),t}();e["a"]=l},a5e9:function(t,e,_){},a605:function(t,e,_){"use strict";var a=_("a5e9"),i=_.n(a);i.a},be37:function(t,e,_){},e7ae:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("99af"),core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("4de4"),core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("4160"),core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_array_includes__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("caad"),core_js_modules_es_array_includes__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_array_includes__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_array_slice__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("fb6a"),core_js_modules_es_array_slice__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_slice__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_array_sort__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("4e82"),core_js_modules_es_array_sort__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_array_sort__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_array_splice__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("a434"),core_js_modules_es_array_splice__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_array_splice__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("b0c0"),core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_number_constructor__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("a9e3"),core_js_modules_es_number_constructor__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_number_constructor__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_number_to_fixed__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("b680"),core_js_modules_es_number_to_fixed__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_number_to_fixed__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("ac1f"),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es_string_includes__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("2532"),core_js_modules_es_string_includes__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es_string_includes__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("1276"),core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_12__),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("159b"),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_13__),G_MedicalWar_web_node_modules_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("7037"),G_MedicalWar_web_node_modules_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(G_MedicalWar_web_node_modules_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_14__),G_MedicalWar_web_node_modules_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("448a"),G_MedicalWar_web_node_modules_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(G_MedicalWar_web_node_modules_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_15__),_api_game_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("89cb");__webpack_exports__["a"]={name:"Game_player",data:function(){return{is_able_to_submit:!0,a_check:!0,b_check:!0,c_check:!0,capital_check:!0,hc_check:!0,channel_check:!0,permission_check:!0,info_check:!0,total_channel:0,total_permission:0,total_info:0,total_hc:0,total_advertising:0,uuid:"",game_id:1,game_name:"",rounds:1,company_id:"a",capital:0,temp_capital:0,hc_limit:0,hc_price:1e3,hc_init:0,hc_assigned:0,hc_can_be_added:0,channel_count:10,channel_price:1100,permission_count:11,permission_price:1010,info_count:12,info_price:1001,profit:0,last_profit:0,total_profit:0,profit_change:0,profit_change_ratio:0,vbp_price:0,vbp_share:0,a_cost:0,b_cost:0,c_cost:0,total_investment:0,total_cost:0,is_submit_show:!1,ready_to_submit:{id:0,name:"god"},company_name:"公司12",filter:"",loading:!1,pagination:{sortBy:"id",descending:!1,page:1,rowsPerPage:0,rowsNumber:10},columns:[{name:"name",required:!0,label:"医院名称",align:"left",field:function(t){return t.name},style:"width: 10px",headerStyle:"width: 10px",format:function(t){return"".concat(t)},sortable:!0},{name:"operation_count",required:!0,label:"年手术台数",align:"left",field:function(t){return t.operation_count},style:"width:200px",format:function(t){return"".concat(t)},sortable:!1},{name:"hc",required:!0,label:"当前HC",align:"left",field:function(t){return t.hc},style:"width:200px",format:function(t){return"".concat(t)},sortable:!1},{name:"advertising",required:!0,label:"市场费用",align:"left",field:function(t){return t.advertising},style:"width:200px",format:function(t){return"".concat(t)},sortable:!1},{name:"a_price",required:!0,label:"产品A价格",align:"left",field:function(t){return t.a_price},style:"width:200px",format:function(t){return"".concat(t)},sortable:!1},{name:"a_count",required:!1,label:"产品A台数",align:"left",field:function(t){return t.a_count},style:"width:200px",format:function(t){return"".concat(t)},sortable:!1},{name:"b_price",required:!1,label:"产品B价格",align:"left",field:function(t){return t.b_price},style:"width:200px",format:function(t){return"".concat(t)},sortable:!1},{name:"b_count",required:!0,label:"产品B台数",align:"left",field:function(t){return t.b_count},style:"width:200px",format:function(t){return"".concat(t)},sortable:!0},{name:"c_price",required:!0,label:"产品C价格",align:"left",field:function(t){return t.c_price},style:"width:200px",format:function(t){return"".concat(t)},sortable:!0},{name:"c_count",required:!0,label:"产品C台数",align:"left",field:function(t){return t.c_count},style:"width:200px",format:function(t){return"".concat(t)},sortable:!0},{name:"last_operation_count",required:!0,label:"上轮台数",align:"left",field:function(t){return t.last_operation_count},style:"width:200px",format:function(t){return"".concat(t)},sortable:!0},{name:"current_operation_count",required:!0,label:"本轮台数",align:"left",field:function(t){return t.current_operation_count},style:"width:200px",format:function(t){return"".concat(t)},sortable:!0},{name:"operation_count_change",required:!0,label:"台数增长净值",align:"left",field:function(t){return t.operation_count_change},style:"width:200px",format:function(t){return"".concat(t)},sortable:!0},{name:"operation_count_change_ratio",required:!0,label:"台数增长比例",align:"left",field:function(t){return t.operation_count_change_ratio},style:"width:200px",format:function(t){return"".concat(t)},sortable:!0},{name:"hc_strategy",required:!0,label:"HC决策",align:"left",field:function(t){return t.hc_strategy},style:"width:200px",format:function(t){return"".concat(t)},sortable:!0},{name:"advertising_strategy",required:!0,label:"市场决策",align:"left",field:function(t){return t.advertising_strategy},style:"width:200px",format:function(t){return"".concat(t)},sortable:!0},{name:"a_strategy",required:!0,label:"产品A价格决策",align:"left",field:function(t){return t.a_strategy},style:"width:200px",format:function(t){return"".concat(t)},sortable:!0},{name:"b_strategy",required:!0,label:"产品B价格决策",align:"left",field:function(t){return t.b_strategy},style:"width:200px",format:function(t){return"".concat(t)},sortable:!0},{name:"c_strategy",required:!0,label:"产品C价格决策",align:"left",field:function(t){return t.c_strategy},style:"width:200px",format:function(t){return"".concat(t)},sortable:!0},{name:"channel",required:!0,label:"渠道牌",align:"left",field:function(t){return t.channel},style:"width:200px",format:function(t){return"".concat(t)},sortable:!0},{name:"permission",required:!0,label:"准入牌",align:"left",field:function(t){return t.permission},style:"width:200px",format:function(t){return"".concat(t)},sortable:!0},{name:"info",required:!0,label:"信息牌",align:"left",field:function(t){return t.info},style:"width:200px",format:function(t){return"".concat(t)},sortable:!0}],data:[],original:[]}},mounted:function(){this.get_uuid(),this.get_current_game_info()},watch:{data:{handler:function(t,e){this.int_parse(),this.calculate(),this.check(),console.log(this.is_able_to_submit)},deep:!0}},methods:{onRequest:function(t){var e=this,_=t.pagination,a=_.page,i=_.rowsPerPage,r=_.sortBy,o=_.descending,s=t.filter;this.loading=!0,this.get_company_data(s,o),setTimeout((function(){var t;e.pagination.rowsNumber=e.getRowsNumberCount(s);var _=0===i?e.pagination.rowsNumber:i,n=(a-1)*i,c=e.fetchFromServer(n,_,s,r,o);(t=e.data).splice.apply(t,[0,e.data.length].concat(G_MedicalWar_web_node_modules_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_15___default()(c))),e.pagination.page=a,e.pagination.rowsPerPage=i,e.pagination.sortBy=r,e.pagination.descending=o,e.loading=!1}),1500)},fetchFromServer:function(t,e,_,a,i){var r=_?this.original.filter((function(t){return t.account.includes(_)})):this.original.slice();if(a){var o="id"===a?i?function(t,e){return t.name>e.name?-1:t.name<e.name?1:0}:function(t,e){return t.name>e.name?1:t.name<e.name?-1:0}:i?function(t,e){return parseFloat(e[a])-parseFloat(t[a])}:function(t,e){return parseFloat(t[a])-parseFloat(e[a])};r.sort(o)}return r.slice(t,t+e)},getRowsNumberCount:function(t){if(!t)return this.original.length;var e=0;return this.original.forEach((function(_){_.account.includes(t)&&++e})),e},get_company_data:function get_company_data(filter,descending){this.original=[];var _this=this;_api_game_js__WEBPACK_IMPORTED_MODULE_16__["a"].GetCompanyData(this.game_id,this.company_id,this.rounds).then((function(response){console.log("111"),console.log(G_MedicalWar_web_node_modules_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_14___default()(response)==G_MedicalWar_web_node_modules_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_14___default()(""));var data=Object.data;data=G_MedicalWar_web_node_modules_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_14___default()(response)==G_MedicalWar_web_node_modules_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_14___default()("")?eval("("+response+")")["data"]:response["data"],console.log("222"),console.log(data);for(var i=0;i<data.length;i++)_this.original.push({name:data[i].name,operation_count:data[i].operation_count,hc_sensitivity:data[i].hc_sensitivity,advertising_sensitivity:data[i].advertising_sensitivity,price_sensitivity:data[i].price_sensitivity,share:data[i].share,share_visibility:data[i].share_visibility,total_share:data[i].total_share,last_share:data[i].last_share,share_change:data[i].share_change,share_change_ratio:data[i].share_change_ratio,hc:data[i].hc,hc_low_limit:data[i].hc_low_limit,advertising:data[i].advertising,a_price:data[i].a_price,a_mean:data[i].a_mean,a_share:data[i].a_share,b_price:data[i].b_price,b_mean:data[i].b_mean,b_share:data[i].b_share,c_price:data[i].c_price,c_mean:data[i].c_mean,c_share:data[i].c_share,a_count:data[i].a_count,b_count:data[i].b_count,c_count:data[i].c_count,last_operation_count:data[i].last_operation_count,current_operation_count:data[i].current_operation_count,operation_count_change:data[i].operation_count_change,operation_count_change_ratio:data[i].operation_count_change_ratio,hc_strategy:data[i].hc_strategy,advertising_strategy:data[i].advertising_strategy,a_strategy:data[i].a_strategy,b_strategy:data[i].b_strategy,c_strategy:data[i].c_strategy,channel:data[i].channel,permission:data[i].permission,info:data[i].info})}))},clear_add_dialog:function(){this.account="",this.password=""},show_delete_dialog:function(t,e){this.is_delete_show=!0,this.ready_to_delete.id=t,this.ready_to_delete.name=e},get_company_info:function(){var t=this;_api_game_js__WEBPACK_IMPORTED_MODULE_16__["a"].GetCompanyInfo(this.game_id,this.rounds).then((function(e){var _=e.data;console.log(_);var a=0;switch(t.company_id){case"a":a=0;break;case"b":a=1;break;case"c":a=2;break;case"d":a=3;break;default:break}t.name=_[a].name,t.capital=_[a].capital,t.hc_init=_[a].hc_init,t.hc_assigned=_[a].hc_assigned,t.hc_can_be_added=_[a].hc_can_be_added,t.hc_price=_[a].hc_price,t.channel_price=_[a].channel_price,t.channel_count=_[a].channel,t.permission_price=_[a].permission_price,t.permission_count=_[a].permission,t.info_price=_[a].info_price,t.info_count=_[a].info,t.profit=_[a].profit,t.last_profit=_[a].last_profit,t.total_profit=_[a].total_profit,t.profit_change=_[a].profit_change,t.profit_change_ratio=_[a].profit_change_ratio,t.vbp_price=_[a].vbp_price,t.vbp_share=_[a].vbp_share,t.a_cost=_[a].a_cost,t.b_cost=_[a].b_cost,t.c_cost=_[a].c_cost,t.total_investment=_[a].total_investment,t.total_cost=_[a].total_cost}))},get_uuid:function(){var t=this.get_query_string("uuid");this.uuid=t},get_query_string:function(t){var e=window.location.href,_=e.split(t+"=")[1];return _},get_current_game_info:function(){var t=this,e=this;_api_game_js__WEBPACK_IMPORTED_MODULE_16__["a"].QueryByUUID(this.uuid).then((function(_){var a=_.data;switch(console.log(a),e.game_id=a.game_id,e.company_id=a.company_id,e.company_id){case"a":e.company_name="长庆";break;case"b":e.company_name="吉业";break;case"c":e.company_name="洛华";break;case"d":e.company_name="柳树威";break;default:break}e.rounds=a.player_rounds,e.game_name=a.name,e.onRequest({pagination:t.pagination,filter:t.filter}),e.get_company_info()}))},submit:function(){var t=this;_api_game_js__WEBPACK_IMPORTED_MODULE_16__["a"].Submit(this.game_id,this.company_id,this.rounds,this.data).then((function(e){switch(e.code){default:break;case 200:t.$q.notify({message:"提交成功",type:"positive",textColor:"white",position:"top"});break}}))},int_parse:function(){this.profit=Number(this.profit).toFixed(2),this.last_profit=Number(this.last_profit).toFixed(2),this.total_profit=Number(this.total_profit).toFixed(2),this.profit_change=Number(this.profit_change).toFixed(2),this.profit_change_ratio=Number(this.profit_change_ratio).toFixed(2);for(var t=0;t<this.data.length;t++){var e=this.data[t];e.hc=Number(e.hc).toFixed(1),e.advertising=Number(e.advertising).toFixed(2),e.a_price=Number(e.a_price).toFixed(2),e.a_share=Number(e.a_share).toFixed(2),e.b_price=Number(e.b_price).toFixed(2),e.b_share=Number(e.b_share).toFixed(2),e.c_price=Number(e.c_price).toFixed(2),e.c_share=Number(e.c_share).toFixed(2),e.a_count=Math.round(e.a_count),e.b_count=Math.round(e.b_count),e.c_count=Math.round(e.c_count),e.hc_strategy=Math.round(e.hc_strategy),e.advertising_strategy=Number(e.advertising_strategy).toFixed(2),e.a_strategy=Number(e.a_strategy).toFixed(2),e.b_strategy=Number(e.b_strategy).toFixed(2),e.c_strategy=Number(e.c_strategy).toFixed(2),e.channel=Math.round(e.channel),e.permission=Math.round(e.permission),e.info=Math.round(e.info),e.last_operation_count=Math.round(e.last_operation_count),e.current_operation_count=Math.round(e.current_operation_count),e.operation_count_change=Number(e.operation_count_change).toFixed(2),e.operation_count_change_ratio=Number(e.operation_count_change_ratio).toFixed(2)}},calculate:function(){var t=this;this.total_hc=0,this.total_advertising=0,this.total_permission=0,this.total_channel=0,this.total_info=0;for(var e=0;e<this.data.length;e++){var _=this.data[e];t.total_hc+=Number(_.hc_strategy),t.total_advertising+=Number(_.advertising_strategy),t.total_permission+=Number(_.permission),t.total_channel+=Number(_.channel),t.total_info+=Number(_.info)}this.temp_capital=Number(this.hc_price*this.total_hc+this.channel_price*this.total_channel+this.permission_price*this.total_permission+this.info_price*this.total_info+this.total_advertising).toFixed(2)},check:function(){"d"==this.company_id?(this.hc_check=2*this.hc_can_be_added-this.total_hc>=0,this.capital_check=1.2*this.capital-this.temp_capital):(this.hc_check=this.hc_can_be_added-this.total_hc>=0,this.capital_check=this.capital-this.temp_capital>=0),this.permission_check=this.permission_count-this.total_permission>=0,this.channel_check=this.channel_count-this.total_channel>=0,this.info_check=this.info_count-this.total_info>=0,this.a_check=!0,this.b_check=!0,this.c_check=!0;for(var t=0;t<this.data.length;t++){var e=this.data[t];if(e.a_strategy<this.a_cost){this.a_check=!1;break}}for(var _=0;_<this.data.length;_++){var a=this.data[_];if(a.b_strategy<this.b_cost){this.b_check=!1;break}}for(var i=0;i<this.data.length;i++){var r=this.data[i];if(r.c_strategy<this.c_cost){this.c_check=!1;break}}this.is_able_to_submit=this.a_check&&this.b_check&&this.c_check&&this.capital_check&&this.hc_check&&this.channel_check&&this.permission_check&&this.info_check}}}}}]);