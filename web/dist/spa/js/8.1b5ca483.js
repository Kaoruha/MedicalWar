(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{a417:function(t,e,n){"use strict";n("d3b7"),n("e6cf");var a=n("970b"),i=n.n(a),o=n("5bc3"),r=n.n(o),s=n("bc3a"),c=n.n(s),l=n("a18c"),u=function(){function t(e,n){i()(this,t),this.url=e,this.timeout=n,this.instance=c.a.create({baseURL:this.url,timeout:this.timeout,headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:localStorage.getItem("Authorization")}}),this.instance.interceptors.request.use((function(t){return t.headers.Authorization=localStorage.getItem("Authorization"),t}),(function(t){return Promise.reject(t)})),this.instance.interceptors.response.use((function(t){switch(t.data.code){case 200:console.log("信息获取成功");break;case 403:console.log("权限不足,权限不足"),l["a"].push("/login");break;case 600:console.log("表单信息错误");break;case 601:console.log("用户名重复");break;case 602:console.log("登录失败");break}return t.data}),(function(t){return Promise.reject(t)}))}return r()(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.instance.get(t,e)}},{key:"post",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.instance.post(t,e,n)}},{key:"upload",value:function(t,e){return this.instance.post(t,e,{headers:{"Content-Type":"multipart/form-data"}})}},{key:"put",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.instance.put(t,e,n)}},{key:"delete",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.instance.delete(t,e)}}]),t}();e["a"]=u},c24f:function(t,e,n){"use strict";var a=n("970b"),i=n.n(a),o=n("5bc3"),r=n.n(o),s=n("ed6d"),c=n.n(s),l=n("2d0d"),u=n.n(l),d=n("a417"),p="local_api/user",f=function(t){c()(n,t);var e=u()(n);function n(){return i()(this,n),e.call(this,p,3e3)}return r()(n,[{key:"Login",value:function(t,e){return this.post("/login",{account:t,password:e})}},{key:"Register",value:function(t,e){return this.post("/register",{account:t,password:e})}},{key:"Filter",value:function(t,e){return this.post("/filter",{start_row:0,count:2e3,account_filter:t,sort_by:"id",descending:e})}},{key:"Delete",value:function(t){return this.post("/delete",{uid:t})}},{key:"test",value:function(){return this.post("/delete",{uid:uid})}}]),n}(d["a"]);e["a"]=new f},d843:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("h4",[t._v("User Manager")]),n("q-table",{attrs:{title:"User List",data:t.data,columns:t.columns,"row-key":"id",pagination:t.pagination,loading:t.loading,filter:t.filter,"binary-state-sort":""},on:{"update:pagination":function(e){t.pagination=e},request:t.onRequest},scopedSlots:t._u([{key:"top-right",fn:function(){return[n("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:t._u([{key:"append",fn:function(){return[n("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),n("q-btn",{staticClass:"btn-add",attrs:{color:"primary",rounded:"",icon:"add",label:"Add User"},on:{click:function(e){t.is_add_show=!0}}})]},proxy:!0},{key:"body",fn:function(e){return[n("q-tr",{attrs:{props:e}},[n("q-td",{key:"id",attrs:{props:e}},[t._v(t._s(e.row.id))]),n("q-td",{key:"account",attrs:{props:e}},[t._v(t._s(e.row.account))]),n("q-td",{key:"description",attrs:{props:e}},[t._v("\n          "+t._s(e.row.description)+"\n          "),n("q-popup-edit",{attrs:{title:"Update Description",buttons:"",persistent:""},model:{value:e.row.description,callback:function(n){t.$set(e.row,"description",n)},expression:"props.row.description"}},[n("q-input",{attrs:{type:"input",dense:"",autofocus:"",hint:"Update Description"},model:{value:e.row.description,callback:function(n){t.$set(e.row,"description",n)},expression:"props.row.description"}})],1)],1),n("q-td",{key:"recent",attrs:{props:e}},[t._v(t._s(e.row.recent))]),n("q-td",{key:"operation",attrs:{props:e}},[n("q-btn",{attrs:{flat:"",color:"white","text-color":"red",label:"Delete"},on:{click:function(n){return t.show_delete_dialog(e.row.id,e.row.account)}}})],1)],1)]}}])}),n("q-dialog",{attrs:{persistent:""},model:{value:t.is_add_show,callback:function(e){t.is_add_show=e},expression:"is_add_show"}},[n("q-card",{staticStyle:{"min-width":"350px"}},[n("q-card-section",[n("div",{staticClass:"text-h6"},[t._v("Add User")])]),n("q-card-section",{staticClass:"q-pt-none"},[n("q-input",{attrs:{dense:"",autofocus:"",placeholder:"Account"},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.prompt=!1}},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}})],1),n("q-card-section",{staticClass:"q-pt-none"},[n("q-input",{attrs:{dense:"",placeholder:"Password"},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.prompt=!1}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),n("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel"}}),n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Add"},on:{click:t.add_user}})],1)],1)],1),n("q-dialog",{attrs:{persistent:""},model:{value:t.is_delete_show,callback:function(e){t.is_delete_show=e},expression:"is_delete_show"}},[n("q-card",{staticStyle:{"min-width":"350px"}},[n("q-card-section",[n("div",{staticClass:"text-h6"},[t._v("Delete User")])]),n("q-card-section",{staticClass:"q-pt-none del-dialog"},[n("p",{staticClass:"msg"},[t._v("Do you really want to delete")]),n("p",{staticClass:"name"},[t._v(t._s(t.ready_to_delete.account)+"?")])]),n("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel"}}),n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",color:"red",label:"Delete"},on:{click:function(e){return t.delete_user(t.ready_to_delete.id)}}})],1)],1)],1)],1)},i=[],o=(n("a4d3"),n("e01a"),n("99af"),n("4de4"),n("4160"),n("caad"),n("fb6a"),n("4e82"),n("a434"),n("b0c0"),n("2532"),n("159b"),n("448a")),r=n.n(o),s=n("c24f"),c={name:"User",data:function(){return{is_add_show:!1,is_delete_show:!1,ready_to_delete:{id:0,account:"god"},account:"",password:"",filter:"",loading:!1,pagination:{sortBy:"id",descending:!1,page:1,rowsPerPage:10,rowsNumber:10},columns:[{name:"id",required:!0,label:"ID",align:"left",field:function(t){return t.id},style:"width: 10px",headerStyle:"width: 10px",format:function(t){return"".concat(t)},sortable:!0},{name:"account",required:!0,label:"Account",align:"left",field:function(t){return t.account},style:"width:200px",format:function(t){return"".concat(t)},sortable:!1},{name:"description",required:!1,label:"Description",align:"left",field:function(t){return t.description},style:"width:200px",format:function(t){return"".concat(t)},sortable:!1},{name:"recent",required:!0,label:"Recent",align:"left",field:function(t){return t.recent},style:"width:200px",format:function(t){return"".concat(t)},sortable:!0},{name:"operation",required:!1,label:"Operation",align:"right",style:"width:200px"}],data:[],original:[]}},mounted:function(){this.onRequest({pagination:this.pagination,filter:this.filter})},methods:{onRequest:function(t){var e=this,n=t.pagination,a=n.page,i=n.rowsPerPage,o=n.sortBy,s=n.descending,c=t.filter;this.loading=!0,this.get_user(c,s),setTimeout((function(){var t;e.pagination.rowsNumber=e.getRowsNumberCount(c);var n=0===i?e.pagination.rowsNumber:i,l=(a-1)*i,u=e.fetchFromServer(l,n,c,o,s);(t=e.data).splice.apply(t,[0,e.data.length].concat(r()(u))),e.pagination.page=a,e.pagination.rowsPerPage=i,e.pagination.sortBy=o,e.pagination.descending=s,e.loading=!1}),1500)},fetchFromServer:function(t,e,n,a,i){var o=n?this.original.filter((function(t){return t.account.includes(n)})):this.original.slice();if(a){var r="id"===a?i?function(t,e){return t.name>e.name?-1:t.name<e.name?1:0}:function(t,e){return t.name>e.name?1:t.name<e.name?-1:0}:i?function(t,e){return parseFloat(e[a])-parseFloat(t[a])}:function(t,e){return parseFloat(t[a])-parseFloat(e[a])};o.sort(r)}return o.slice(t,t+e)},getRowsNumberCount:function(t){if(!t)return this.original.length;var e=0;return this.original.forEach((function(n){n.account.includes(t)&&++e})),e},get_user:function(t,e){this.original=[];var n=this;s["a"].Filter(t,e).then((function(t){var e=t.data;console.log(t);for(var a=0;a<e.length;a++)n.original.push({account:e[a].account,id:e[a].id,description:e[a].description,recent:e[a].update})}))},clear_add_dialog:function(){this.name="",this.description=""},add_user:function(){var t=this;s["a"].Register(this.account,this.password).then((function(e){switch(e.code){default:break;case 200:t.onRequest({pagination:t.pagination,filter:t.filter});break;case 600:break;case 601:break}})),this.clear_add_dialog()},show_delete_dialog:function(t,e){this.is_delete_show=!0,this.ready_to_delete.id=t,this.ready_to_delete.account=e},delete_user:function(t){var e=this;s["a"].Delete(t).then((function(t){switch(t.code){default:break;case 200:e.onRequest({pagination:e.pagination,filter:e.filter});break}}))},test:function(){this.$router.push("/login")}}},l=c,u=(n("f2a4"),n("2877")),d=n("eaac"),p=n("27f9"),f=n("0016"),h=n("9c40"),g=n("bd08"),b=n("db86"),m=n("42a1"),_=n("24e8"),w=n("f09f"),v=n("a370"),y=n("4b7e"),k=n("7f67"),q=n("eebe"),x=n.n(q),C=Object(u["a"])(l,a,i,!1,null,"27739fac",null);e["default"]=C.exports;x()(C,"components",{QTable:d["a"],QInput:p["a"],QIcon:f["a"],QBtn:h["a"],QTr:g["a"],QTd:b["a"],QPopupEdit:m["a"],QDialog:_["a"],QCard:w["a"],QCardSection:v["a"],QCardActions:y["a"]}),x()(C,"directives",{ClosePopup:k["a"]})},e565:function(t,e,n){},f2a4:function(t,e,n){"use strict";var a=n("e565"),i=n.n(a);i.a}}]);