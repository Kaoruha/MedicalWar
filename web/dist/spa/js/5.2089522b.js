(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"0cef":function(t,e,n){"use strict";var a=n("4b33"),i=n.n(a);i.a},"4b33":function(t,e,n){},8249:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("h4",{staticClass:"text-green-5"},[t._v("Game Host Copy")]),n("div",[n("q-input",{attrs:{outlined:"",label:"game_id"},model:{value:t.game_id,callback:function(e){t.game_id=e},expression:"game_id"}}),n("q-input",{attrs:{outlined:"",label:"company_id"},model:{value:t.company_id,callback:function(e){t.company_id=e},expression:"company_id"}}),n("q-input",{attrs:{outlined:"",label:"rounds"},model:{value:t.rounds,callback:function(e){t.rounds=e},expression:"rounds"}}),n("q-btn",{attrs:{color:"primary",label:"Primary"},on:{click:t.primaryBtn}})],1),n("q-card",{staticClass:"my-card"},[n("q-img",{attrs:{src:"https://cdn.quasar.dev/img/parallax2.jpg"}},[n("div",{staticClass:"absolute-bottom"},[n("div",{staticClass:"text-h6"},[t._v(t._s(t.game_name))]),n("div",{staticClass:"text-subtitle2"},[t._v("Current Round ："+t._s(t.round))])])]),n("q-card-actions",[n("q-btn",{staticStyle:{width:"120px"},attrs:{flat:"",color:"negative"},on:{click:t.end_the_game}},[t._v("End the Game")]),n("q-btn",{staticStyle:{width:"120px"},attrs:{disabled:"",color:"primary"},on:{click:t.commit}},[t._v("Next")])],1)],1),n("div",{staticClass:"row q-col-gutter-md"},t._l(4,(function(e){return n("div",{key:"md-"+e,staticClass:"col-12"},[n("q-table",{attrs:{title:"data[n]",data:t.data,columns:t.columns,"row-key":"id",pagination:t.pagination,loading:t.loading,filter:t.filter,"binary-state-sort":""},on:{"update:pagination":function(e){t.pagination=e},request:t.onRequest},scopedSlots:t._u([{key:"top-right",fn:function(){return[n("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),n("q-btn",{staticClass:"btn-add",attrs:{color:"primary",rounded:"",icon:"done",label:t.is_company_checked[e-1].check?"Checked":"Check"},on:{click:function(n){t.is_company_checked[e-1].check=!t.is_company_checked[e-1].check}}})]},proxy:!0},{key:"body",fn:function(e){return[n("q-tr",{attrs:{props:e}},[n("q-td",{key:"id",attrs:{props:e}},[t._v(t._s(e.row.id))]),n("q-td",{key:"name",attrs:{props:e}},[t._v(t._s(e.row.name))]),n("q-td",{key:"hc",attrs:{props:e}},[t._v("\n              "+t._s(e.row.description)+"\n              "),n("q-popup-edit",{attrs:{title:"Update HC",buttons:"",persistent:""},model:{value:e.row.description,callback:function(n){t.$set(e.row,"description",n)},expression:"props.row.description"}},[n("q-input",{attrs:{type:"input",dense:"",autofocus:"",hint:"Use buttons to close"},model:{value:e.row.description,callback:function(n){t.$set(e.row,"description",n)},expression:"props.row.description"}})],1)],1),n("q-td",{key:"advertising",attrs:{props:e}},[t._v(t._s(e.row.round))]),n("q-td",{key:"product_a",attrs:{props:e}},[t._v(t._s(e.row.recent))]),n("q-td",{key:"product_b",attrs:{props:e}}),n("q-td",{key:"product_c",attrs:{props:e}}),n("q-td",{key:"channel",attrs:{props:e}}),n("q-td",{key:"permission",attrs:{props:e}}),n("q-td",{key:"info",attrs:{props:e}})],1)]}}],null,!0)})],1)})),0)],1)},i=[],r=(n("a4d3"),n("e01a"),n("99af"),n("4de4"),n("4160"),n("caad"),n("fb6a"),n("4e82"),n("a434"),n("b0c0"),n("2532"),n("159b"),n("448a")),o=n.n(r),s=n("89cb"),c={name:"Game_host",data:function(){return{game_id:"",company_id:"",rounds:"",game_name:"default",round:0,is_company_checked:[{check:!1},{check:!1},{check:!1},{check:!1}],filter:"",loading:!1,pagination:{sortBy:"id",descending:!1,page:1,rowsPerPage:10,rowsNumber:10},columns:[{name:"id",required:!0,label:"ID",align:"left",field:function(t){return t.id},style:"width: 10px",headerStyle:"width: 10px",format:function(t){return"".concat(t)},sortable:!0},{name:"name",required:!0,label:"Name",align:"left",field:function(t){return t.account},style:"width:200px",format:function(t){return"".concat(t)},sortable:!1},{name:"hc",required:!1,label:"HC",align:"left",field:function(t){return t.description},style:"width:200px",format:function(t){return"".concat(t)},sortable:!1},{name:"advertising",required:!1,label:"Advertising",align:"left",field:function(t){return t.description},style:"width:200px",format:function(t){return"".concat(t)},sortable:!1},{name:"product_a",required:!0,label:"ProductA Price",align:"left",field:function(t){return t.recent},style:"width:200px",format:function(t){return"".concat(t)},sortable:!0},{name:"product_b",required:!0,label:"ProductB Price",align:"left",field:function(t){return t.recent},style:"width:200px",format:function(t){return"".concat(t)},sortable:!0},{name:"product_c",required:!0,label:"ProductC Price",align:"left",field:function(t){return t.recent},style:"width:200px",format:function(t){return"".concat(t)},sortable:!0},{name:"channel",required:!1,label:"Channel",align:"right",style:"width:200px"},{name:"permission",required:!1,label:"Permission",align:"right",style:"width:200px"},{name:"info",required:!1,label:"Info",align:"right",style:"width:200px"}],data:[],original:[]}},mounted:function(){this.get_current_game(),this.onRequest({pagination:this.pagination,filter:this.filter})},methods:{primaryBtn:function(){s["a"].GetCompanyData(this.game_id,this.company_id,this.rounds)},onRequest:function(t){var e=this,n=t.pagination,a=n.page,i=n.rowsPerPage,r=n.sortBy,s=n.descending,c=t.filter;this.loading=!0,this.get_company_strategy(c,s),setTimeout((function(){var t;e.pagination.rowsNumber=e.getRowsNumberCount(c);var n=0===i?e.pagination.rowsNumber:i,u=(a-1)*i,l=e.fetchFromServer(u,n,c,r,s);(t=e.data).splice.apply(t,[0,e.data.length].concat(o()(l))),e.pagination.page=a,e.pagination.rowsPerPage=i,e.pagination.sortBy=r,e.pagination.descending=s,e.loading=!1}),1500)},fetchFromServer:function(t,e,n,a,i){var r=n?this.original.filter((function(t){return t.account.includes(n)})):this.original.slice();if(a){var o="id"===a?i?function(t,e){return t.name>e.name?-1:t.name<e.name?1:0}:function(t,e){return t.name>e.name?1:t.name<e.name?-1:0}:i?function(t,e){return parseFloat(e[a])-parseFloat(t[a])}:function(t,e){return parseFloat(t[a])-parseFloat(e[a])};r.sort(o)}return r.slice(t,t+e)},getRowsNumberCount:function(t){if(!t)return this.original.length;var e=0;return this.original.forEach((function(n){n.account.includes(t)&&++e})),e},get_company_strategy:function(t,e){this.original=[];var n=this;s["a"].Filter(t,e).then((function(t){var e=t.data;console.log(e);for(var a=0;a<e.length;a++)n.original.push({name:e[a].name,id:e[a].id,description:e[a].description,round:e[a].rounds,recent:e[a].update})}))},enter_game:function(t){alert("进入游戏id:"+t)},get_current_game:function(){var t=localStorage.getItem("current_game_id");this.game_name=t},commit:function(){alert("提交信息")},end_the_game:function(){alert("做个二次确认")}}},u=c,l=(n("0cef"),n("2877")),d=n("27f9"),p=n("9c40"),f=n("f09f"),m=n("068f"),g=n("4b7e"),h=n("eaac"),_=n("0016"),b=n("bd08"),y=n("db86"),v=n("42a1"),k=n("eebe"),w=n.n(k),q=Object(l["a"])(u,a,i,!1,null,"d4ab468c",null);e["default"]=q.exports;w()(q,"components",{QInput:d["a"],QBtn:p["a"],QCard:f["a"],QImg:m["a"],QCardActions:g["a"],QTable:h["a"],QIcon:_["a"],QTr:b["a"],QTd:y["a"],QPopupEdit:v["a"]})},"89cb":function(t,e,n){"use strict";var a=n("970b"),i=n.n(a),r=n("5bc3"),o=n.n(r),s=n("ed6d"),c=n.n(s),u=n("2d0d"),l=n.n(u),d=n("a417"),p="local_api/game",f=function(t){c()(n,t);var e=l()(n);function n(){return i()(this,n),e.call(this,p,3e3)}return o()(n,[{key:"Create",value:function(t,e){return this.post("/register",{name:t,description:e})}},{key:"Filter",value:function(t,e){return this.post("/filter",{start_row:0,count:2e3,account_filter:t,sort_by:"id",descending:e})}},{key:"Delete",value:function(t){return this.post("/delete",{uid:t})}},{key:"Submit",value:function(t,e,n,a){return this.post("/submit",{game_id:t,company_id:e,rounds:n,data:a})}},{key:"GetCompanyData",value:function(t,e,n){return this.post("/get_com_data",{game_id:t,company_id:e,rounds:n})}},{key:"GetCompanyInfo",value:function(t,e){return this.post("/get_com_info",{game_id:t,rounds:e})}},{key:"GetGameInfo",value:function(t){return this.post("/get_game_info",{game_id:t})}},{key:"Next",value:function(t,e){return this.post("/next",{game_id:t,data:e})}},{key:"Start",value:function(t){return this.post("/start",{game_id:t})}}]),n}(d["a"]);e["a"]=new f},a417:function(t,e,n){"use strict";n("d3b7"),n("e6cf");var a=n("970b"),i=n.n(a),r=n("5bc3"),o=n.n(r),s=n("bc3a"),c=n.n(s),u=n("a18c"),l=function(){function t(e,n){i()(this,t),this.url=e,this.timeout=n,this.instance=c.a.create({baseURL:this.url,timeout:this.timeout,headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:localStorage.getItem("Authorization")}}),this.instance.interceptors.request.use((function(t){return t.headers.Authorization=localStorage.getItem("Authorization"),t}),(function(t){return Promise.reject(t)})),this.instance.interceptors.response.use((function(t){switch(t.data.code){case 200:console.log("信息获取成功");break;case 403:console.log("权限不足,权限不足"),u["a"].push("/login");break;case 600:console.log("表单信息错误");break;case 601:console.log("用户名重复");break;case 602:console.log("登录失败");break}return t.data}),(function(t){return Promise.reject(t)}))}return o()(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.instance.get(t,e)}},{key:"post",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.instance.post(t,e,n)}},{key:"upload",value:function(t,e){return this.instance.post(t,e,{headers:{"Content-Type":"multipart/form-data"}})}},{key:"put",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.instance.put(t,e,n)}},{key:"delete",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.instance.delete(t,e)}}]),t}();e["a"]=l}}]);