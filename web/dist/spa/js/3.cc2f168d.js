(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{0:function(t,e){},"0d83":function(t,e,a){},2:function(t,e){},2557:function(t,e,a){"use strict";var _=a("0d83"),i=a.n(_);i.a},3:function(t,e){},"3e5f":function(t,e,a){"use strict";a.r(e);var _=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("h4",[t._v(t._s(t.game_name))]),a("q-card",{staticClass:"my-card"},[a("q-img",{attrs:{src:"https://cdn.quasar.dev/img/parallax2.jpg"}},[a("div",{staticClass:"absolute-bottom"},[a("div",{staticClass:"text-h6"},[t._v(t._s(t.company_name))]),a("div",{staticClass:"text-subtitle2"},[t._v("Current Round ："+t._s(t.rounds))])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[t._v("剩余资金："+t._s(this.capital))]),a("div",{staticClass:"col",style:{color:t.capital_check?"#666":"#FF0000"}},[t._v("\n        使用："+t._s(this.temp_capital)+"\n      ")]),a("div",{staticClass:"col"},[t._v("人力成本:"+t._s(t.hc_price))]),a("div",{staticClass:"col"},[t._v("渠道牌价格："+t._s(t.channel_price))]),a("div",{staticClass:"col"},[t._v("准入牌价格："+t._s(t.permission_price))]),a("div",{staticClass:"col"},[t._v("信息牌价格："+t._s(t.info_price))]),a("div",{staticClass:"col",style:{color:t.a_check?"#666":"#FF0000"}},[t._v("\n        A成本："+t._s(t.a_cost)+"\n      ")]),a("div",{staticClass:"col",style:{color:t.b_check?"#666":"#FF0000"}},[t._v("\n        B成本："+t._s(t.b_cost)+"\n      ")]),a("div",{staticClass:"col",style:{color:t.c_check?"#666":"#FF0000"}},[t._v("\n        C成本："+t._s(t.c_cost)+"\n      ")])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[t._v("初始人数："+t._s(t.hc_init))]),a("div",{staticClass:"col"},[t._v("已分配人数："+t._s(t.hc_assigned))]),a("div",{staticClass:"col",style:{color:t.hc_check?"#666":"#FF0000"}},[t._v("\n        新分配人数："+t._s(t.total_hc)+"\n      ")]),a("div",{staticClass:"col"},[t._v("可新增人数:"+t._s(t.hc_can_be_added))]),a("div",{staticClass:"col",style:{color:t.channel_check?"#666":"#FF0000"}},[t._v("\n        渠道牌数量："+t._s(t.channel_count-t.total_channel)+"\n      ")]),a("div",{staticClass:"col",style:{color:t.permission_check?"#666":"#FF0000"}},[t._v("\n        准入牌数量："+t._s(t.permission_count-t.total_permission)+"\n      ")]),a("div",{staticClass:"col",style:{color:t.info_check?"#666":"#FF0000"}},[t._v("\n        信息牌数量："+t._s(t.info_count-t.total_info)+"\n      ")])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[t._v("营收："+t._s(t.profit))]),a("div",{staticClass:"col"},[t._v("上轮营收："+t._s(t.last_profit))]),a("div",{staticClass:"col"},[t._v("总营收："+t._s(t.total_profit))]),a("div",{staticClass:"col"},[t._v("营收增长净值："+t._s(t.profit_change))]),a("div",{staticClass:"col"},[t._v("营收增长比例："+t._s(t.profit_change_ratio))])])],1),a("q-table",{staticClass:"my-sticky-virtscroll-table",attrs:{"virtual-scroll":"",pagination:t.pagination,"rows-per-page-options":[0],"virtual-scroll-sticky-size-start":48,"row-key":"id",title:"Strategy",data:t.data,columns:t.columns},on:{"update:pagination":function(e){t.pagination=e},request:t.onRequest},scopedSlots:t._u([{key:"top-right",fn:function(){return[a("q-btn",{staticStyle:{color:"#8080ff","margin-left":"40px"},attrs:{flat:"",label:"Export"},on:{click:t.export2excel}}),a("q-btn",{staticStyle:{color:"#8080ff","margin-left":"40px"},attrs:{flat:"",label:"批量"},on:{click:function(e){t.is_batch_show=!0}}}),a("q-btn",{staticClass:"btn-add",attrs:{color:"primary",rounded:"",icon:"skip_next",label:"Next Round",disabled:!t.is_able_to_submit},on:{click:function(e){t.is_submit_show=!0}}})]},proxy:!0},{key:"body",fn:function(e){return[a("q-tr",{attrs:{props:e}},[a("q-tooltip",{attrs:{anchor:"top left",self:"top middle",offset:[10,10]}},[a("strong",[t._v(t._s(e.row.name))]),a("br"),a("em",[t._v("\n            "+t._s(1==e.row.share_visibility?e.row.operation_count:"暂不可见")+"\n          ")])]),a("q-td",{key:"uid",attrs:{props:e}},[t._v(t._s(e.row.uid))]),a("q-td",{key:"name",attrs:{props:e}},[t._v(t._s(e.row.name))]),a("q-td",{key:"operation_count",attrs:{props:e}},[t._v("\n          "+t._s(1==e.row.share_visibility?e.row.operation_count:"暂不可见")+"\n        ")]),a("q-td",{key:"hc",attrs:{props:e}},[t._v(t._s(e.row.hc))]),a("q-td",{key:"advertising",attrs:{props:e}},[t._v("\n          "+t._s(e.row.advertising)+"\n        ")]),a("q-td",{key:"a_price",attrs:{props:e}},[t._v(t._s(e.row.a_price))]),a("q-td",{key:"a_count",attrs:{props:e}},[t._v(t._s(e.row.a_count))]),a("q-td",{key:"b_price",attrs:{props:e}},[t._v(t._s(e.row.b_price))]),a("q-td",{key:"b_count",attrs:{props:e}},[t._v(t._s(e.row.b_count))]),a("q-td",{key:"c_price",attrs:{props:e}},[t._v(t._s(e.row.c_price))]),a("q-td",{key:"c_count",attrs:{props:e}},[t._v(t._s(e.row.c_count))]),a("q-td",{key:"last_operation_count",attrs:{props:e}},[t._v("\n          "+t._s(e.row.last_operation_count)+"\n        ")]),a("q-td",{key:"current_operation_count",attrs:{props:e}},[t._v("\n          "+t._s(e.row.current_operation_count)+"\n        ")]),a("q-td",{key:"operation_count_change",attrs:{props:e}},[t._v("\n          "+t._s(e.row.operation_count_change)+"\n        ")]),a("q-td",{key:"operation_count_change_ratio",attrs:{props:e}},[t._v("\n          "+t._s(e.row.operation_count_change_ratio)+"\n        ")]),a("q-td",{key:"hc_strategy",staticClass:"editable",attrs:{props:e}},[t._v("\n          "+t._s(e.row.hc_strategy)+"\n          "),a("q-popup-edit",{attrs:{title:"Update HC",buttons:"","auto-save":""},model:{value:e.row.hc_strategy,callback:function(a){t.$set(e.row,"hc_strategy",t._n(a))},expression:"props.row.hc_strategy"}},[a("q-input",{attrs:{type:"number",dense:"",autofocus:"",hint:"Use buttons to close"},model:{value:e.row.hc_strategy,callback:function(a){t.$set(e.row,"hc_strategy",a)},expression:"props.row.hc_strategy"}})],1)],1),a("q-td",{key:"advertising_strategy",staticClass:"editable",attrs:{props:e}},[t._v("\n          "+t._s(e.row.advertising_strategy)+"\n          "),a("q-popup-edit",{attrs:{title:"Update Advertising",buttons:"","auto-save":""},model:{value:e.row.advertising_strategy,callback:function(a){t.$set(e.row,"advertising_strategy",a)},expression:"props.row.advertising_strategy"}},[a("q-input",{attrs:{type:"number",dense:"",autofocus:"",hint:"Use buttons to close"},model:{value:e.row.advertising_strategy,callback:function(a){t.$set(e.row,"advertising_strategy",a)},expression:"props.row.advertising_strategy"}})],1)],1),a("q-td",{key:"a_strategy",staticClass:"editable",attrs:{props:e}},[t._v("\n          "+t._s(e.row.a_strategy)+"\n          "),a("q-popup-edit",{attrs:{title:"Update A Price",buttons:"","auto-save":""},model:{value:e.row.a_strategy,callback:function(a){t.$set(e.row,"a_strategy",a)},expression:"props.row.a_strategy"}},[a("q-input",{attrs:{type:"number",dense:"",autofocus:"",hint:"Use buttons to close"},model:{value:e.row.a_strategy,callback:function(a){t.$set(e.row,"a_strategy",a)},expression:"props.row.a_strategy"}})],1)],1),a("q-td",{key:"b_strategy",staticClass:"editable",attrs:{props:e}},[t._v("\n          "+t._s(e.row.b_strategy)+"\n          "),a("q-popup-edit",{attrs:{title:"Update B Price",buttons:"","auto-save":""},model:{value:e.row.b_strategy,callback:function(a){t.$set(e.row,"b_strategy",a)},expression:"props.row.b_strategy"}},[a("q-input",{attrs:{type:"number",dense:"",autofocus:"",hint:"Use buttons to close"},model:{value:e.row.b_strategy,callback:function(a){t.$set(e.row,"b_strategy",a)},expression:"props.row.b_strategy"}})],1)],1),a("q-td",{key:"c_strategy",staticClass:"editable",attrs:{props:e}},[t._v("\n          "+t._s(e.row.c_strategy)+"\n          "),a("q-popup-edit",{attrs:{title:"Update C Price",buttons:"","auto-save":""},model:{value:e.row.c_strategy,callback:function(a){t.$set(e.row,"c_strategy",a)},expression:"props.row.c_strategy"}},[a("q-input",{attrs:{type:"number",dense:"",autofocus:"",hint:"Use buttons to close"},model:{value:e.row.c_strategy,callback:function(a){t.$set(e.row,"c_strategy",a)},expression:"props.row.c_strategy"}})],1)],1),a("q-td",{key:"channel",staticClass:"editable",attrs:{props:e}},[t._v("\n          "+t._s(e.row.channel)+"\n          "),a("q-popup-edit",{attrs:{title:"Update Channel",buttons:"","auto-save":""},model:{value:e.row.channel,callback:function(a){t.$set(e.row,"channel",a)},expression:"props.row.channel"}},[a("q-input",{attrs:{type:"number",dense:"",autofocus:"",hint:"Use buttons to close"},model:{value:e.row.channel,callback:function(a){t.$set(e.row,"channel",a)},expression:"props.row.channel"}})],1)],1),a("q-td",{key:"permission",staticClass:"editable",attrs:{props:e}},[t._v("\n          "+t._s(e.row.permission)+"\n          "),a("q-popup-edit",{attrs:{title:"Update Permission",buttons:"","auto-save":""},model:{value:e.row.permission,callback:function(a){t.$set(e.row,"permission",a)},expression:"props.row.permission"}},[a("q-input",{attrs:{type:"number",dense:"",autofocus:"",hint:"Use buttons to close"},model:{value:e.row.permission,callback:function(a){t.$set(e.row,"permission",a)},expression:"props.row.permission"}})],1)],1),a("q-td",{key:"info",staticClass:"editable",attrs:{props:e}},[t._v("\n          "+t._s(e.row.info)+"\n          "),a("q-popup-edit",{attrs:{title:"Update Info",buttons:"","auto-save":""},model:{value:e.row.info,callback:function(a){t.$set(e.row,"info",a)},expression:"props.row.info"}},[a("q-input",{attrs:{type:"number",dense:"",autofocus:"",hint:"Use buttons to close"},model:{value:e.row.info,callback:function(a){t.$set(e.row,"info",a)},expression:"props.row.info"}})],1)],1)],1)]}}])}),a("q-dialog",{model:{value:t.is_submit_show,callback:function(e){t.is_submit_show=e},expression:"is_submit_show"}},[a("q-card",{staticStyle:{"min-width":"350px"}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("结束回合")])]),a("q-card-section",{staticClass:"q-pt-none del-dialog"},[a("p",{staticClass:"msg"},[t._v("你确定提交第"+t._s(t.rounds)+"回合策略么？")])]),a("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",color:"green",label:"Submit"},on:{click:function(e){return t.submit()}}})],1)],1)],1),a("q-dialog",{model:{value:t.is_batch_show,callback:function(e){t.is_batch_show=e},expression:"is_batch_show"}},[a("q-card",{staticStyle:{"min-width":"350px"}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("批量填写")])]),a("q-card-section",{staticClass:"q-pt-none del-dialog"},[a("q-select",{attrs:{filled:"",options:t.options,label:"目标字段"},model:{value:t.batch,callback:function(e){t.batch=e},expression:"batch"}}),a("q-input",{staticStyle:{"margin-top":"20px"},attrs:{label:"Number",type:"number"},model:{value:t.batch_num,callback:function(e){t.batch_num=e},expression:"batch_num"}})],1),a("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",color:"green",label:"Submit"},on:{click:function(e){return t.batch_submit()}}})],1)],1)],1)],1)},i=[],s=a("e7ae"),r=s["a"],o=(a("2557"),a("a605"),a("2877")),n=a("f09f"),c=a("068f"),l=a("eaac"),u=a("27f9"),d=a("0016"),p=a("9c40"),h=a("bd08"),m=a("05c0"),f=a("db86"),b=a("42a1"),g=a("24e8"),y=a("a370"),v=a("4b7e"),w=a("ddd8"),E=a("7f67"),k=a("eebe"),C=a.n(k),q=Object(o["a"])(r,_,i,!1,null,"3c836386",null);e["default"]=q.exports;C()(q,"components",{QCard:n["a"],QImg:c["a"],QTable:l["a"],QInput:u["a"],QIcon:d["a"],QBtn:p["a"],QTr:h["a"],QTooltip:m["a"],QTd:f["a"],QPopupEdit:b["a"],QDialog:g["a"],QCardSection:y["a"],QCardActions:v["a"],QSelect:w["a"]}),C()(q,"directives",{ClosePopup:E["a"]})},"89cb":function(t,e,a){"use strict";var _=a("970b"),i=a.n(_),s=a("5bc3"),r=a.n(s),o=a("ed6d"),n=a.n(o),c=a("2d0d"),l=a.n(c),u=a("a417"),d="api/game",p=function(t){n()(a,t);var e=l()(a);function a(){return i()(this,a),e.call(this,d,3e3)}return r()(a,[{key:"Create",value:function(t,e){return this.post("/register",{name:t,description:e})}},{key:"Filter",value:function(t,e){return this.post("/filter",{start_row:0,count:2e3,account_filter:t,sort_by:"id",descending:e})}},{key:"Delete",value:function(t){return this.post("/delete",{uid:t})}},{key:"Submit",value:function(t,e,a,_){return this.post("/submit",{game_id:t,company_id:e,rounds:a,data:_})}},{key:"GetCompanyData",value:function(t,e,a){return this.post("/get_com_data",{game_id:t,company_id:e,rounds:a})}},{key:"GetCompanyInfo",value:function(t,e){return this.post("/get_com_info",{game_id:t,rounds:e})}},{key:"GetGameInfo",value:function(t){return this.post("/get_game_info",{game_id:t})}},{key:"Next",value:function(t,e){return this.post("/next",{game_id:t,data:e})}},{key:"Start",value:function(t,e){return this.post("/start",{game_id:t,data:e})}},{key:"QueryByUUID",value:function(t){return this.post("/query_by_uuid",{uuid:t})}}]),a}(u["a"]);e["a"]=new p},a417:function(t,e,a){"use strict";a("d3b7"),a("e6cf");var _=a("970b"),i=a.n(_),s=a("5bc3"),r=a.n(s),o=a("bc3a"),n=a.n(o),c=(a("a18c"),a("2a19")),l=function(){function t(e,a){i()(this,t),this.url=e,this.timeout=1e4,this.instance=n.a.create({baseURL:this.url,timeout:this.timeout,headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:localStorage.getItem("Authorization")}}),this.instance.interceptors.request.use((function(t){return t.headers.Authorization=localStorage.getItem("Authorization"),t}),(function(t){return Promise.reject(t)})),this.instance.interceptors.response.use((function(t){switch(t.data.code){case 200:console.log("尝试获取信息");break;case 403:console.log(t.data),window.router.push("/login"),c["a"].create({message:"权限不足，请登录后尝试",type:"negative",textColor:"white",position:"top"});break;case 600:c["a"].create({message:"表单信息错误",type:"negative",textColor:"white",position:"top"});break;case 601:c["a"].create({message:"用户名重复",type:"negative",textColor:"white",position:"top"});break;case 602:c["a"].create({message:"登录失败",type:"negative",textColor:"white",position:"top"});break}return t.data}),(function(t){return Promise.reject(t)}))}return r()(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.instance.get(t,e)}},{key:"post",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.instance.post(t,e,a)}},{key:"upload",value:function(t,e){return this.instance.post(t,e,{headers:{"Content-Type":"multipart/form-data"}})}},{key:"put",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.instance.put(t,e,a)}},{key:"delete",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.instance.delete(t,e)}}]),t}();e["a"]=l},a5e9:function(t,e,a){},a605:function(t,e,a){"use strict";var _=a("a5e9"),i=a.n(_);i.a},ccc0:function(t,e,a){"use strict";a("e260"),a("c19f"),a("ace4"),a("d3b7"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7");var _=a("21a6"),i=a.n(_),s=a("1146"),r=a.n(s);function o(t,e,a){var _=r.a.utils.json_to_sheet(t);i.a.saveAs(new Blob([n(_,a)],{type:"application/octet-stream;charset=utf-8"}),e)}function n(t,e){e=e||"sheet1";var a={SheetNames:[e],Sheets:{}};a.Sheets[e]=t;var _={bookType:"xlsx",bookSST:!1,type:"binary"},i=r.a.write(a,_),s=new Blob([c(i)],{type:"application/octet-stream"});return s}function c(t){for(var e=new ArrayBuffer(t.length),a=new Uint8Array(e),_=0;_<t.length;++_)a[_]=255&t.charCodeAt(_);return e}e["a"]=o},e7ae:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("99af"),core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("4de4"),core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("4160"),core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_array_includes__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("caad"),core_js_modules_es_array_includes__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_array_includes__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_array_slice__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("fb6a"),core_js_modules_es_array_slice__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_slice__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_array_sort__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("4e82"),core_js_modules_es_array_sort__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_array_sort__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_array_splice__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("a434"),core_js_modules_es_array_splice__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_array_splice__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("b0c0"),core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_number_constructor__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("a9e3"),core_js_modules_es_number_constructor__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_number_constructor__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_number_to_fixed__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("b680"),core_js_modules_es_number_to_fixed__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_number_to_fixed__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("ac1f"),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es_string_includes__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("2532"),core_js_modules_es_string_includes__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es_string_includes__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("1276"),core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_12__),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("159b"),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_13__),_Users_suny_Documents_GitHub_MedicalWar_web_node_modules_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("7037"),_Users_suny_Documents_GitHub_MedicalWar_web_node_modules_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(_Users_suny_Documents_GitHub_MedicalWar_web_node_modules_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_14__),_Users_suny_Documents_GitHub_MedicalWar_web_node_modules_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("448a"),_Users_suny_Documents_GitHub_MedicalWar_web_node_modules_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(_Users_suny_Documents_GitHub_MedicalWar_web_node_modules_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_15__),_api_game_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("89cb"),_scripts_xlsx_js__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("ccc0");__webpack_exports__["a"]={name:"Game_player",data:function(){return{batch_num:0,batch:"HC决策",options:["HC决策","市场决策","产品A价格决策","产品B价格决策","产品C价格决策","渠道牌","准入牌","信息牌"],options_target:["hc_strategy","advertising_strategy","a_strategy","b_strategy","c_strategy","channel","permission","info"],is_able_to_submit:!0,a_check:!0,b_check:!0,c_check:!0,capital_check:!0,hc_check:!0,channel_check:!0,permission_check:!0,info_check:!0,total_channel:0,total_permission:0,total_info:0,total_hc:0,total_advertising:0,uuid:"",game_id:1,game_name:"",rounds:1,company_id:"a",capital:0,temp_capital:0,hc_limit:0,hc_price:1e3,hc_init:0,hc_assigned:0,hc_can_be_added:0,channel_count:10,channel_price:1100,permission_count:11,permission_price:1010,info_count:12,info_price:1001,profit:0,last_profit:0,total_profit:0,profit_change:0,profit_change_ratio:0,vbp_price:0,vbp_share:0,a_cost:0,b_cost:0,c_cost:0,total_investment:0,total_cost:0,is_batch_show:!1,is_submit_show:!1,ready_to_submit:{id:0,name:"god"},company_name:"公司12",filter:"",loading:!1,pagination:{sortBy:"id",descending:!1,page:1,rowsPerPage:0,rowsNumber:10},columns:[{name:"uid",required:!0,label:"ID",align:"left",field:function(t){return t.uid},style:"width: 10px",headerStyle:"width: 10px",format:function(t){return"".concat(t)},sortable:!1},{name:"name",required:!0,label:"医院名称",align:"left",field:function(t){return t.name},style:"width: 10px",headerStyle:"width: 10px",format:function(t){return"".concat(t)},sortable:!1},{name:"operation_count",required:!0,label:"年手术台数",align:"left",field:function(t){return t.operation_count},style:"width:200px",format:function(t){return"".concat(t)},sortable:!1},{name:"hc",required:!0,label:"当前HC",align:"left",field:function(t){return t.hc},style:"width:200px",format:function(t){return"".concat(t)},sortable:!1},{name:"advertising",required:!0,label:"市场费用",align:"left",field:function(t){return t.advertising},style:"width:200px",format:function(t){return"".concat(t)},sortable:!1},{name:"a_price",required:!0,label:"产品A价格",align:"left",field:function(t){return t.a_price},style:"width:200px",format:function(t){return"".concat(t)},sortable:!1},{name:"a_count",required:!1,label:"产品A台数",align:"left",field:function(t){return t.a_count},style:"width:200px",format:function(t){return"".concat(t)},sortable:!1},{name:"b_price",required:!1,label:"产品B价格",align:"left",field:function(t){return t.b_price},style:"width:200px",format:function(t){return"".concat(t)},sortable:!1},{name:"b_count",required:!0,label:"产品B台数",align:"left",field:function(t){return t.b_count},style:"width:200px",format:function(t){return"".concat(t)},sortable:!1},{name:"c_price",required:!0,label:"产品C价格",align:"left",field:function(t){return t.c_price},style:"width:200px",format:function(t){return"".concat(t)},sortable:!1},{name:"c_count",required:!0,label:"产品C台数",align:"left",field:function(t){return t.c_count},style:"width:200px",format:function(t){return"".concat(t)},sortable:!1},{name:"last_operation_count",required:!0,label:"上轮台数",align:"left",field:function(t){return t.last_operation_count},style:"width:200px",format:function(t){return"".concat(t)},sortable:!1},{name:"current_operation_count",required:!0,label:"本轮台数",align:"left",field:function(t){return t.current_operation_count},style:"width:200px",format:function(t){return"".concat(t)},sortable:!1},{name:"operation_count_change",required:!0,label:"台数增长净值",align:"left",field:function(t){return t.operation_count_change},style:"width:200px",format:function(t){return"".concat(t)},sortable:!1},{name:"operation_count_change_ratio",required:!0,label:"台数增长比例",align:"left",field:function(t){return t.operation_count_change_ratio},style:"width:200px",format:function(t){return"".concat(t)},sortable:!1},{name:"hc_strategy",required:!0,label:"HC决策",align:"left",field:function(t){return t.hc_strategy},style:"width:200px",format:function(t){return"".concat(t)},sortable:!1},{name:"advertising_strategy",required:!0,label:"市场决策",align:"left",field:function(t){return t.advertising_strategy},style:"width:200px",format:function(t){return"".concat(t)},sortable:!1},{name:"a_strategy",required:!0,label:"产品A价格决策",align:"left",field:function(t){return t.a_strategy},style:"width:200px",format:function(t){return"".concat(t)},sortable:!1},{name:"b_strategy",required:!0,label:"产品B价格决策",align:"left",field:function(t){return t.b_strategy},style:"width:200px",format:function(t){return"".concat(t)},sortable:!1},{name:"c_strategy",required:!0,label:"产品C价格决策",align:"left",field:function(t){return t.c_strategy},style:"width:200px",format:function(t){return"".concat(t)},sortable:!1},{name:"channel",required:!0,label:"渠道牌",align:"left",field:function(t){return t.channel},style:"width:200px",format:function(t){return"".concat(t)},sortable:!1},{name:"permission",required:!0,label:"准入牌",align:"left",field:function(t){return t.permission},style:"width:200px",format:function(t){return"".concat(t)},sortable:!1},{name:"info",required:!0,label:"信息牌",align:"left",field:function(t){return t.info},style:"width:200px",format:function(t){return"".concat(t)},sortable:!1}],data:[],original:[]}},mounted:function(){this.get_uuid(),this.get_current_game_info()},watch:{data:{handler:function(t,e){this.calculate(),this.int_parse(),this.check()},deep:!0}},methods:{test:function(t,e){alert(t),alert(e)},onRequest:function(t){var e=this,a=t.pagination,_=a.page,i=a.rowsPerPage,s=a.sortBy,r=a.descending,o=t.filter;this.loading=!0,this.get_company_data(o,r),setTimeout((function(){var t;e.pagination.rowsNumber=e.getRowsNumberCount(o);var a=0===i?e.pagination.rowsNumber:i,n=(_-1)*i,c=e.fetchFromServer(n,a,o,s,r);(t=e.data).splice.apply(t,[0,e.data.length].concat(_Users_suny_Documents_GitHub_MedicalWar_web_node_modules_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_15___default()(c))),e.pagination.page=_,e.pagination.rowsPerPage=i,e.pagination.sortBy=s,e.pagination.descending=r,e.loading=!1}),1500)},fetchFromServer:function(t,e,a,_,i){var s=a?this.original.filter((function(t){return t.account.includes(a)})):this.original.slice();if(_){var r="name"===_?i?function(t,e){return t.name>e.name?-1:t.name<e.name?1:0}:function(t,e){return t.name>e.name?1:t.name<e.name?-1:0}:i?function(t,e){return parseFloat(e[_])-parseFloat(t[_])}:function(t,e){return parseFloat(t[_])-parseFloat(e[_])};s.sort(r)}return s.slice(t,t+e)},getRowsNumberCount:function(t){if(!t)return this.original.length;var e=0;return this.original.forEach((function(a){a.account.includes(t)&&++e})),e},get_company_data:function get_company_data(filter,descending){this.original=[];var _this=this;_api_game_js__WEBPACK_IMPORTED_MODULE_16__["a"].GetCompanyData(this.game_id,this.company_id,this.rounds).then((function(response){var data=Object.data;data=_Users_suny_Documents_GitHub_MedicalWar_web_node_modules_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_14___default()(response)==_Users_suny_Documents_GitHub_MedicalWar_web_node_modules_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_14___default()("")?eval("("+response+")")["data"]:response["data"],console.log(data);for(var i=0;i<data.length;i++)_this.original.push({uid:data[i].uid,name:data[i].name,operation_count:data[i].operation_count,hc_sensitivity:data[i].hc_sensitivity,advertising_sensitivity:data[i].advertising_sensitivity,price_sensitivity:data[i].price_sensitivity,share:data[i].share,share_visibility:data[i].share_visibility,total_share:data[i].total_share,last_share:data[i].last_share,share_change:data[i].share_change,share_change_ratio:data[i].share_change_ratio,hc:data[i].hc,hc_low_limit:data[i].hc_low_limit,advertising:data[i].advertising,a_price:data[i].a_price,a_mean:data[i].a_mean,a_share:data[i].a_share,b_price:data[i].b_price,b_mean:data[i].b_mean,b_share:data[i].b_share,c_price:data[i].c_price,c_mean:data[i].c_mean,c_share:data[i].c_share,a_count:data[i].a_count,b_count:data[i].b_count,c_count:data[i].c_count,last_operation_count:data[i].last_operation_count,current_operation_count:data[i].current_operation_count,operation_count_change:data[i].operation_count_change,operation_count_change_ratio:data[i].operation_count_change_ratio,hc_strategy:data[i].hc_strategy,advertising_strategy:data[i].advertising_strategy,a_strategy:data[i].a_strategy,b_strategy:data[i].b_strategy,c_strategy:data[i].c_strategy,channel:data[i].channel,permission:data[i].permission,info:data[i].info})}))},clear_add_dialog:function(){this.account="",this.password=""},show_delete_dialog:function(t,e){this.is_delete_show=!0,this.ready_to_delete.id=t,this.ready_to_delete.name=e},get_company_info:function(){var t=this;_api_game_js__WEBPACK_IMPORTED_MODULE_16__["a"].GetCompanyInfo(this.game_id,this.rounds).then((function(e){var a=e.data;console.log(a);var _="";switch(t.company_id){case"a":_="长庆";break;case"b":_="吉业";break;case"c":_="洛华";break;case"d":_="柳树威";break;default:break}for(var i=0;i<a.length;i++)a[i].name==_&&(t.name=a[i].name,t.capital=a[i].capital,t.hc_init=a[i].hc_init,t.hc_assigned=a[i].hc_assigned,t.hc_can_be_added=a[i].hc_can_be_added,t.hc_price=a[i].hc_price,t.channel_price=a[i].channel_price,t.channel_count=a[i].channel,t.permission_price=a[i].permission_price,t.permission_count=a[i].permission,t.info_price=a[i].info_price,t.info_count=a[i].info,t.profit=a[i].profit,t.last_profit=a[i].last_profit,t.total_profit=a[i].total_profit,t.profit_change=a[i].profit_change,t.profit_change_ratio=a[i].profit_change_ratio,t.vbp_price=a[i].vbp_price,t.vbp_share=a[i].vbp_share,t.a_cost=a[i].a_cost,t.b_cost=a[i].b_cost,t.c_cost=a[i].c_cost,t.total_investment=a[i].total_investment,t.total_cost=a[i].total_cost)}))},get_uuid:function(){var t=this.get_query_string("uuid");this.uuid=t},get_query_string:function(t){var e=window.location.href,a=e.split(t+"=")[1];return a},get_current_game_info:function(){var t=this,e=this;_api_game_js__WEBPACK_IMPORTED_MODULE_16__["a"].QueryByUUID(this.uuid).then((function(a){var _=a.data;switch(console.log(_),e.game_id=_.game_id,e.company_id=_.company_id,e.company_id){case"a":e.company_name="长庆";break;case"b":e.company_name="吉业";break;case"c":e.company_name="洛华";break;case"d":e.company_name="柳树威";break;default:break}e.rounds=_.player_rounds,e.game_name=_.name,e.onRequest({pagination:t.pagination,filter:t.filter}),e.get_company_info()}))},submit:function(){var t=this;_api_game_js__WEBPACK_IMPORTED_MODULE_16__["a"].Submit(this.game_id,this.company_id,this.rounds,this.data).then((function(e){switch(e.code){default:break;case 200:t.$q.notify({message:"提交成功",type:"positive",textColor:"white",position:"top"});break}}))},int_parse:function(){this.profit=Number(this.profit).toFixed(2),this.last_profit=Number(this.last_profit).toFixed(2),this.total_profit=Number(this.total_profit).toFixed(2),this.profit_change=Number(this.profit_change).toFixed(2),this.profit_change_ratio=Number(this.profit_change_ratio).toFixed(2),this.total_hc=Number(this.total_hc).toFixed(1);for(var t=0;t<this.data.length;t++){var e=this.data[t];e.hc=Number(e.hc).toFixed(1),e.advertising=Number(e.advertising).toFixed(2),e.a_price=Number(e.a_price).toFixed(2),e.a_share=Number(e.a_share).toFixed(2),e.b_price=Number(e.b_price).toFixed(2),e.b_share=Number(e.b_share).toFixed(2),e.c_price=Number(e.c_price).toFixed(2),e.c_share=Number(e.c_share).toFixed(2),e.a_count=Math.round(e.a_count),e.b_count=Math.round(e.b_count),e.c_count=Math.round(e.c_count),e.hc_strategy=Number(e.hc_strategy).toFixed(1),e.advertising_strategy=Number(e.advertising_strategy).toFixed(2),e.a_strategy=Number(e.a_strategy).toFixed(2),e.b_strategy=Number(e.b_strategy).toFixed(2),e.c_strategy=Number(e.c_strategy).toFixed(2),e.channel=Math.round(e.channel),e.permission=Math.round(e.permission),e.info=Math.round(e.info),e.last_operation_count=Math.round(e.last_operation_count),e.current_operation_count=Math.round(e.current_operation_count),e.operation_count_change=Number(e.operation_count_change).toFixed(2),e.operation_count_change_ratio=Number(e.operation_count_change_ratio).toFixed(2)}},calculate:function(){var t=this;this.total_hc=0,this.total_advertising=0,this.total_permission=0,this.total_channel=0,this.total_info=0;for(var e=0;e<this.data.length;e++){var a=this.data[e];t.total_hc+=Number(a.hc_strategy),t.total_advertising+=Number(a.advertising_strategy),t.total_permission+=Number(a.permission),t.total_channel+=Number(a.channel),t.total_info+=Number(a.info)}this.temp_capital=Number(this.hc_price*(this.total_hc-this.hc_init)+this.channel_price*this.total_channel+this.permission_price*this.total_permission+this.info_price*this.total_info+this.total_advertising).toFixed(2),console.log(this.total_hc)},check:function(){"d"==this.company_id?(this.hc_check=2*this.hc_can_be_added+this.hc_assigned-this.total_hc>=0,this.capital_check=this.capital+25e4-this.temp_capital>=0):"c"==this.company_id?this.hc_check=2*this.hc_can_be_added+this.hc_assigned-this.total_hc>=0:(this.hc_check=this.hc_can_be_added+this.hc_assigned-this.total_hc>=0,this.capital_check=this.capital-this.temp_capital>=0),this.permission_check=this.permission_count-this.total_permission>=0,this.channel_check=this.channel_count-this.total_channel>=0,this.info_check=this.info_count-this.total_info>=0,this.a_check=!0,this.b_check=!0,this.c_check=!0;for(var t=0;t<this.data.length;t++){var e=this.data[t];if(e.a_strategy<this.a_cost){this.a_check=!1;break}}for(var a=0;a<this.data.length;a++){var _=this.data[a];if(_.b_strategy<this.b_cost){this.b_check=!1;break}}for(var i=0;i<this.data.length;i++){var s=this.data[i];if(s.c_strategy<this.c_cost){this.c_check=!1;break}}this.is_able_to_submit=this.a_check&&this.b_check&&this.c_check&&this.capital_check&&this.hc_check&&this.channel_check&&this.permission_check&&this.info_check},export2excel:function(){for(var t=[],e=this.data,a=0;a<e.length;a++)t.push({ID:e[a].uid,"医院名称":e[a].name,"年手术台数":1==e[a].share_visibility?e[a].operation_count:"暂不可见","当前HC":e[a].hc,"推广费用":e[a].advertising,"产品A价格":e[a].a_price,"产品B价格":e[a].b_price,"产品C价格":e[a].c_price,"产品A台数":e[a].a_count,"产品B台数":e[a].b_count,"产品C台数":e[a].c_count,"上轮台数":e[a].last_operation_count,"本轮台数":e[a].current_operation_count,"台数增长净值":e[a].operation_count_change,"台数增长比例":e[a].operation_count_change_ratio,"HC决策":e[a].hc_strategy,"推广决策":e[a].advertising_strategy,"产品A价格决策":e[a].a_strategy,"产品B价格决策":e[a].b_strategy,"产品C价格决策":e[a].c_strategy,"渠道牌":e[a].channel,"准入牌":e[a].permission,"信息牌":e[a].info});var _=this.game_name+"_"+this.rounds+"_"+this.company_name+".xlsx";Object(_scripts_xlsx_js__WEBPACK_IMPORTED_MODULE_17__["a"])(t,_)},batch_submit:function(){for(var t=0,e=0;e<this.options.length;e++)this.options[e]==this.batch&&(t=e);for(var a=0;a<this.data.length;a++){var _=this.data[a];_[this.options_target[t]]=this.batch_num}this.batch_num=0}}}}}]);